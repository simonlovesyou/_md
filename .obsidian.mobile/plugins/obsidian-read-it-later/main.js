/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Dr=Object.create;var at=Object.defineProperty;var Rr=Object.getOwnPropertyDescriptor;var xr=Object.getOwnPropertyNames;var Cr=Object.getPrototypeOf,Lr=Object.prototype.hasOwnProperty;var Pr=(i,t,e)=>t in i?at(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var De=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Ir=(i,t)=>{for(var e in t)at(i,e,{get:t[e],enumerable:!0})},rn=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of xr(t))!Lr.call(i,r)&&r!==e&&at(i,r,{get:()=>t[r],enumerable:!(n=Rr(t,r))||n.enumerable});return i};var We=(i,t,e)=>(e=i!=null?Dr(Cr(i)):{},rn(t||!i||!i.__esModule?at(e,"default",{value:i,enumerable:!0}):e,i)),kr=i=>rn(at({},"__esModule",{value:!0}),i);var k=(i,t,e)=>Pr(i,typeof t!="symbol"?t+"":t,e);var un=De((ln,cn)=>{(function(i){if(typeof ln=="object")cn.exports=i();else if(typeof define=="function"&&define.amd)define(i);else{var t;try{t=window}catch(e){t=self}t.SparkMD5=i()}})(function(i){"use strict";var t=function(m,p){return m+p&4294967295},e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(m,p,o,s,h,c){return p=t(t(p,m),t(s,c)),t(p<<h|p>>>32-h,o)}function r(m,p){var o=m[0],s=m[1],h=m[2],c=m[3];o+=(s&h|~s&c)+p[0]-680876936|0,o=(o<<7|o>>>25)+s|0,c+=(o&s|~o&h)+p[1]-389564586|0,c=(c<<12|c>>>20)+o|0,h+=(c&o|~c&s)+p[2]+606105819|0,h=(h<<17|h>>>15)+c|0,s+=(h&c|~h&o)+p[3]-1044525330|0,s=(s<<22|s>>>10)+h|0,o+=(s&h|~s&c)+p[4]-176418897|0,o=(o<<7|o>>>25)+s|0,c+=(o&s|~o&h)+p[5]+1200080426|0,c=(c<<12|c>>>20)+o|0,h+=(c&o|~c&s)+p[6]-1473231341|0,h=(h<<17|h>>>15)+c|0,s+=(h&c|~h&o)+p[7]-45705983|0,s=(s<<22|s>>>10)+h|0,o+=(s&h|~s&c)+p[8]+1770035416|0,o=(o<<7|o>>>25)+s|0,c+=(o&s|~o&h)+p[9]-1958414417|0,c=(c<<12|c>>>20)+o|0,h+=(c&o|~c&s)+p[10]-42063|0,h=(h<<17|h>>>15)+c|0,s+=(h&c|~h&o)+p[11]-1990404162|0,s=(s<<22|s>>>10)+h|0,o+=(s&h|~s&c)+p[12]+1804603682|0,o=(o<<7|o>>>25)+s|0,c+=(o&s|~o&h)+p[13]-40341101|0,c=(c<<12|c>>>20)+o|0,h+=(c&o|~c&s)+p[14]-1502002290|0,h=(h<<17|h>>>15)+c|0,s+=(h&c|~h&o)+p[15]+1236535329|0,s=(s<<22|s>>>10)+h|0,o+=(s&c|h&~c)+p[1]-165796510|0,o=(o<<5|o>>>27)+s|0,c+=(o&h|s&~h)+p[6]-1069501632|0,c=(c<<9|c>>>23)+o|0,h+=(c&s|o&~s)+p[11]+643717713|0,h=(h<<14|h>>>18)+c|0,s+=(h&o|c&~o)+p[0]-373897302|0,s=(s<<20|s>>>12)+h|0,o+=(s&c|h&~c)+p[5]-701558691|0,o=(o<<5|o>>>27)+s|0,c+=(o&h|s&~h)+p[10]+38016083|0,c=(c<<9|c>>>23)+o|0,h+=(c&s|o&~s)+p[15]-660478335|0,h=(h<<14|h>>>18)+c|0,s+=(h&o|c&~o)+p[4]-405537848|0,s=(s<<20|s>>>12)+h|0,o+=(s&c|h&~c)+p[9]+568446438|0,o=(o<<5|o>>>27)+s|0,c+=(o&h|s&~h)+p[14]-1019803690|0,c=(c<<9|c>>>23)+o|0,h+=(c&s|o&~s)+p[3]-187363961|0,h=(h<<14|h>>>18)+c|0,s+=(h&o|c&~o)+p[8]+1163531501|0,s=(s<<20|s>>>12)+h|0,o+=(s&c|h&~c)+p[13]-1444681467|0,o=(o<<5|o>>>27)+s|0,c+=(o&h|s&~h)+p[2]-51403784|0,c=(c<<9|c>>>23)+o|0,h+=(c&s|o&~s)+p[7]+1735328473|0,h=(h<<14|h>>>18)+c|0,s+=(h&o|c&~o)+p[12]-1926607734|0,s=(s<<20|s>>>12)+h|0,o+=(s^h^c)+p[5]-378558|0,o=(o<<4|o>>>28)+s|0,c+=(o^s^h)+p[8]-2022574463|0,c=(c<<11|c>>>21)+o|0,h+=(c^o^s)+p[11]+1839030562|0,h=(h<<16|h>>>16)+c|0,s+=(h^c^o)+p[14]-35309556|0,s=(s<<23|s>>>9)+h|0,o+=(s^h^c)+p[1]-1530992060|0,o=(o<<4|o>>>28)+s|0,c+=(o^s^h)+p[4]+1272893353|0,c=(c<<11|c>>>21)+o|0,h+=(c^o^s)+p[7]-155497632|0,h=(h<<16|h>>>16)+c|0,s+=(h^c^o)+p[10]-1094730640|0,s=(s<<23|s>>>9)+h|0,o+=(s^h^c)+p[13]+681279174|0,o=(o<<4|o>>>28)+s|0,c+=(o^s^h)+p[0]-358537222|0,c=(c<<11|c>>>21)+o|0,h+=(c^o^s)+p[3]-722521979|0,h=(h<<16|h>>>16)+c|0,s+=(h^c^o)+p[6]+76029189|0,s=(s<<23|s>>>9)+h|0,o+=(s^h^c)+p[9]-640364487|0,o=(o<<4|o>>>28)+s|0,c+=(o^s^h)+p[12]-421815835|0,c=(c<<11|c>>>21)+o|0,h+=(c^o^s)+p[15]+530742520|0,h=(h<<16|h>>>16)+c|0,s+=(h^c^o)+p[2]-995338651|0,s=(s<<23|s>>>9)+h|0,o+=(h^(s|~c))+p[0]-198630844|0,o=(o<<6|o>>>26)+s|0,c+=(s^(o|~h))+p[7]+1126891415|0,c=(c<<10|c>>>22)+o|0,h+=(o^(c|~s))+p[14]-1416354905|0,h=(h<<15|h>>>17)+c|0,s+=(c^(h|~o))+p[5]-57434055|0,s=(s<<21|s>>>11)+h|0,o+=(h^(s|~c))+p[12]+1700485571|0,o=(o<<6|o>>>26)+s|0,c+=(s^(o|~h))+p[3]-1894986606|0,c=(c<<10|c>>>22)+o|0,h+=(o^(c|~s))+p[10]-1051523|0,h=(h<<15|h>>>17)+c|0,s+=(c^(h|~o))+p[1]-2054922799|0,s=(s<<21|s>>>11)+h|0,o+=(h^(s|~c))+p[8]+1873313359|0,o=(o<<6|o>>>26)+s|0,c+=(s^(o|~h))+p[15]-30611744|0,c=(c<<10|c>>>22)+o|0,h+=(o^(c|~s))+p[6]-1560198380|0,h=(h<<15|h>>>17)+c|0,s+=(c^(h|~o))+p[13]+1309151649|0,s=(s<<21|s>>>11)+h|0,o+=(h^(s|~c))+p[4]-145523070|0,o=(o<<6|o>>>26)+s|0,c+=(s^(o|~h))+p[11]-1120210379|0,c=(c<<10|c>>>22)+o|0,h+=(o^(c|~s))+p[2]+718787259|0,h=(h<<15|h>>>17)+c|0,s+=(c^(h|~o))+p[9]-343485551|0,s=(s<<21|s>>>11)+h|0,m[0]=o+m[0]|0,m[1]=s+m[1]|0,m[2]=h+m[2]|0,m[3]=c+m[3]|0}function a(m){var p=[],o;for(o=0;o<64;o+=4)p[o>>2]=m.charCodeAt(o)+(m.charCodeAt(o+1)<<8)+(m.charCodeAt(o+2)<<16)+(m.charCodeAt(o+3)<<24);return p}function l(m){var p=[],o;for(o=0;o<64;o+=4)p[o>>2]=m[o]+(m[o+1]<<8)+(m[o+2]<<16)+(m[o+3]<<24);return p}function d(m){var p=m.length,o=[1732584193,-271733879,-1732584194,271733878],s,h,c,L,G,J;for(s=64;s<=p;s+=64)r(o,a(m.substring(s-64,s)));for(m=m.substring(s-64),h=m.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<h;s+=1)c[s>>2]|=m.charCodeAt(s)<<(s%4<<3);if(c[s>>2]|=128<<(s%4<<3),s>55)for(r(o,c),s=0;s<16;s+=1)c[s]=0;return L=p*8,L=L.toString(16).match(/(.*?)(.{0,8})$/),G=parseInt(L[2],16),J=parseInt(L[1],16)||0,c[14]=G,c[15]=J,r(o,c),o}function g(m){var p=m.length,o=[1732584193,-271733879,-1732584194,271733878],s,h,c,L,G,J;for(s=64;s<=p;s+=64)r(o,l(m.subarray(s-64,s)));for(m=s-64<p?m.subarray(s-64):new Uint8Array(0),h=m.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<h;s+=1)c[s>>2]|=m[s]<<(s%4<<3);if(c[s>>2]|=128<<(s%4<<3),s>55)for(r(o,c),s=0;s<16;s+=1)c[s]=0;return L=p*8,L=L.toString(16).match(/(.*?)(.{0,8})$/),G=parseInt(L[2],16),J=parseInt(L[1],16)||0,c[14]=G,c[15]=J,r(o,c),o}function f(m){var p="",o;for(o=0;o<4;o+=1)p+=e[m>>o*8+4&15]+e[m>>o*8&15];return p}function y(m){var p;for(p=0;p<m.length;p+=1)m[p]=f(m[p]);return m.join("")}y(d("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(m,p){var o=(m&65535)+(p&65535),s=(m>>16)+(p>>16)+(o>>16);return s<<16|o&65535}),typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function m(p,o){return p=p|0||0,p<0?Math.max(p+o,0):Math.min(p,o)}ArrayBuffer.prototype.slice=function(p,o){var s=this.byteLength,h=m(p,s),c=s,L,G,J,fe;return o!==i&&(c=m(o,s)),h>c?new ArrayBuffer(0):(L=c-h,G=new ArrayBuffer(L),J=new Uint8Array(G),fe=new Uint8Array(this,h,L),J.set(fe),G)}}();function _(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function O(m,p){var o=m.length,s=new ArrayBuffer(o),h=new Uint8Array(s),c;for(c=0;c<o;c+=1)h[c]=m.charCodeAt(c);return p?h:s}function D(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function I(m,p,o){var s=new Uint8Array(m.byteLength+p.byteLength);return s.set(new Uint8Array(m)),s.set(new Uint8Array(p),m.byteLength),o?s:s.buffer}function R(m){var p=[],o=m.length,s;for(s=0;s<o-1;s+=2)p.push(parseInt(m.substr(s,2),16));return String.fromCharCode.apply(String,p)}function w(){this.reset()}return w.prototype.append=function(m){return this.appendBinary(_(m)),this},w.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var p=this._buff.length,o;for(o=64;o<=p;o+=64)r(this._hash,a(this._buff.substring(o-64,o)));return this._buff=this._buff.substring(o-64),this},w.prototype.end=function(m){var p=this._buff,o=p.length,s,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c;for(s=0;s<o;s+=1)h[s>>2]|=p.charCodeAt(s)<<(s%4<<3);return this._finish(h,o),c=y(this._hash),m&&(c=R(c)),this.reset(),c},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(m,p){var o=p,s,h,c;if(m[o>>2]|=128<<(o%4<<3),o>55)for(r(this._hash,m),o=0;o<16;o+=1)m[o]=0;s=this._length*8,s=s.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(s[2],16),c=parseInt(s[1],16)||0,m[14]=h,m[15]=c,r(this._hash,m)},w.hash=function(m,p){return w.hashBinary(_(m),p)},w.hashBinary=function(m,p){var o=d(m),s=y(o);return p?R(s):s},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(m){var p=I(this._buff.buffer,m,!0),o=p.length,s;for(this._length+=m.byteLength,s=64;s<=o;s+=64)r(this._hash,l(p.subarray(s-64,s)));return this._buff=s-64<o?new Uint8Array(p.buffer.slice(s-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(m){var p=this._buff,o=p.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h,c;for(h=0;h<o;h+=1)s[h>>2]|=p[h]<<(h%4<<3);return this._finish(s,o),c=y(this._hash),m&&(c=R(c)),this.reset(),c},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var m=w.prototype.getState.call(this);return m.buff=D(m.buff),m},w.ArrayBuffer.prototype.setState=function(m){return m.buff=O(m.buff,!0),w.prototype.setState.call(this,m)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(m,p){var o=g(new Uint8Array(m)),s=y(o);return p?R(s):s},w})});var yn=De(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.toSeconds=K.end=K.parse=K.pattern=void 0;var ze="\\d+",oi="".concat(ze,"(?:[\\.,]").concat(ze,")?"),$r="(".concat(ze,"Y)?(").concat(ze,"M)?(").concat(ze,"W)?(").concat(ze,"D)?"),Wr="T(".concat(oi,"H)?(").concat(oi,"M)?(").concat(oi,"S)?"),Gr="P(?:".concat($r,"(?:").concat(Wr,")?)"),zr=["years","months","weeks","days","hours","minutes","seconds"],dn=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0});K.pattern=new RegExp(Gr);var jr=function(i){var t=i.replace(/,/g,".").match(K.pattern);if(!t)throw new RangeError("invalid duration: ".concat(i));var e=t.slice(1);if(e.filter(function(n){return n!=null}).length===0)throw new RangeError("invalid duration: ".concat(i));if(e.filter(function(n){return/\./.test(n||"")}).length>1)throw new RangeError("only the smallest unit can be fractional");return e.reduce(function(n,r,a){return n[zr[a]]=parseFloat(r||"0")||0,n},{})};K.parse=jr;var qr=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},dn,i),n=t.getTime(),r=new Date(n);r.setFullYear(r.getFullYear()+e.years),r.setMonth(r.getMonth()+e.months),r.setDate(r.getDate()+e.days);var a=e.hours*3600*1e3,l=e.minutes*60*1e3;return r.setMilliseconds(r.getMilliseconds()+e.seconds*1e3+a+l),r.setDate(r.getDate()+e.weeks*7),r};K.end=qr;var Yr=function(i,t){t===void 0&&(t=new Date);var e=Object.assign({},dn,i),n=t.getTime(),r=new Date(n),a=(0,K.end)(e,r),l=t.getTimezoneOffset(),d=a.getTimezoneOffset(),g=(l-d)*60,f=(a.getTime()-r.getTime())/1e3;return f+g};K.toSeconds=Yr;K.default={end:K.end,toSeconds:K.toSeconds,pattern:K.pattern,parse:K.parse}});var Ni=De((Ti,vi)=>{(function(i,t){typeof Ti=="object"&&typeof vi!="undefined"?vi.exports=t():typeof define=="function"&&define.amd?define(t):(i=typeof globalThis!="undefined"?globalThis:i||self,i.DOMPurify=t())})(Ti,function(){"use strict";function i(N){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},i(N)}function t(N,E){return t=Object.setPrototypeOf||function(P,$){return P.__proto__=$,P},t(N,E)}function e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(N){return!1}}function n(N,E,x){return e()?n=Reflect.construct:n=function($,se,ae){var he=[null];he.push.apply(he,se);var Ae=Function.bind.apply($,he),tt=new Ae;return ae&&t(tt,ae.prototype),tt},n.apply(null,arguments)}function r(N){return a(N)||l(N)||d(N)||f()}function a(N){if(Array.isArray(N))return g(N)}function l(N){if(typeof Symbol!="undefined"&&N[Symbol.iterator]!=null||N["@@iterator"]!=null)return Array.from(N)}function d(N,E){if(N){if(typeof N=="string")return g(N,E);var x=Object.prototype.toString.call(N).slice(8,-1);if(x==="Object"&&N.constructor&&(x=N.constructor.name),x==="Map"||x==="Set")return Array.from(N);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return g(N,E)}}function g(N,E){(E==null||E>N.length)&&(E=N.length);for(var x=0,P=new Array(E);x<E;x++)P[x]=N[x];return P}function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=Object.hasOwnProperty,_=Object.setPrototypeOf,O=Object.isFrozen,D=Object.getPrototypeOf,I=Object.getOwnPropertyDescriptor,R=Object.freeze,w=Object.seal,m=Object.create,p=typeof Reflect!="undefined"&&Reflect,o=p.apply,s=p.construct;o||(o=function(E,x,P){return E.apply(x,P)}),R||(R=function(E){return E}),w||(w=function(E){return E}),s||(s=function(E,x){return n(E,r(x))});var h=te(Array.prototype.forEach),c=te(Array.prototype.pop),L=te(Array.prototype.push),G=te(String.prototype.toLowerCase),J=te(String.prototype.toString),fe=te(String.prototype.match),ee=te(String.prototype.replace),Xe=te(String.prototype.indexOf),Ot=te(String.prototype.trim),H=te(RegExp.prototype.test),V=Ke(TypeError);function te(N){return function(E){for(var x=arguments.length,P=new Array(x>1?x-1:0),$=1;$<x;$++)P[$-1]=arguments[$];return o(N,E,P)}}function Ke(N){return function(){for(var E=arguments.length,x=new Array(E),P=0;P<E;P++)x[P]=arguments[P];return s(N,x)}}function C(N,E,x){var P;x=(P=x)!==null&&P!==void 0?P:G,_&&_(N,null);for(var $=E.length;$--;){var se=E[$];if(typeof se=="string"){var ae=x(se);ae!==se&&(O(E)||(E[$]=ae),se=ae)}N[se]=!0}return N}function ce(N){var E=m(null),x;for(x in N)o(y,N,[x])===!0&&(E[x]=N[x]);return E}function F(N,E){for(;N!==null;){var x=I(N,E);if(x){if(x.get)return te(x.get);if(typeof x.value=="function")return te(x.value)}N=D(N)}function P($){return console.warn("fallback value for",$),null}return P}var ve=R(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pe=R(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ie=R(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ht=R(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ee=R(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ke=R(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Me=R(["#text"]),Ne=R(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Je=R(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ze=R(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ie=R(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ue=w(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pt=w(/<%[\w\W]*|[\w\W]*%>/gm),Oe=w(/\${[\w\W]*}/gm),de=w(/^data-[\-\w.\u00B7-\uFFFF]/),Qe=w(/^aria-[\-\w]+$/),et=w(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Zn=w(/^(?:\w+script|data):/i),Qn=w(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),er=w(/^html$/i),tr=w(/^[a-z][.\w]*(-[.\w]+)+$/i),ir=function(){return typeof window=="undefined"?null:window},nr=function(E,x){if(i(E)!=="object"||typeof E.createPolicy!="function")return null;var P=null,$="data-tt-policy-suffix";x.currentScript&&x.currentScript.hasAttribute($)&&(P=x.currentScript.getAttribute($));var se="dompurify"+(P?"#"+P:"");try{return E.createPolicy(se,{createHTML:function(he){return he},createScriptURL:function(he){return he}})}catch(ae){return console.warn("TrustedTypes policy "+se+" could not be created."),null}};function Pi(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ir(),E=function(u){return Pi(u)};if(E.version="2.5.6",E.removed=[],!N||!N.document||N.document.nodeType!==9)return E.isSupported=!1,E;var x=N.document,P=N.document,$=N.DocumentFragment,se=N.HTMLTemplateElement,ae=N.Node,he=N.Element,Ae=N.NodeFilter,tt=N.NamedNodeMap,ar=tt===void 0?N.NamedNodeMap||N.MozNamedAttrMap:tt,sr=N.HTMLFormElement,or=N.DOMParser,gt=N.trustedTypes,mt=he.prototype,lr=F(mt,"cloneNode"),cr=F(mt,"nextSibling"),ur=F(mt,"childNodes"),Ft=F(mt,"parentNode");if(typeof se=="function"){var Ut=P.createElement("template");Ut.content&&Ut.content.ownerDocument&&(P=Ut.content.ownerDocument)}var le=nr(gt,x),Bt=le?le.createHTML(""):"",ft=P,Ht=ft.implementation,hr=ft.createNodeIterator,pr=ft.createDocumentFragment,gr=ft.getElementsByTagName,mr=x.importNode,Ii={};try{Ii=ce(P).documentMode?P.documentMode:{}}catch(S){}var pe={};E.isSupported=typeof Ft=="function"&&Ht&&Ht.createHTMLDocument!==void 0&&Ii!==9;var Vt=ue,$t=pt,Wt=Oe,fr=de,dr=Qe,yr=Zn,ki=Qn,br=tr,Gt=et,j=null,Mi=C({},[].concat(r(ve),r(Pe),r(Ie),r(Ee),r(Me))),q=null,Oi=C({},[].concat(r(Ne),r(Je),r(Ze),r(ie))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,zt=null,Fi=!0,jt=!0,Ui=!1,Bi=!0,Fe=!1,qt=!0,we=!1,Yt=!1,Xt=!1,Ue=!1,dt=!1,yt=!1,Hi=!0,Vi=!1,Tr="user-content-",Kt=!0,nt=!1,Be={},He=null,$i=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Wi=null,Gi=C({},["audio","video","img","source","image","track"]),Jt=null,zi=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bt="http://www.w3.org/1998/Math/MathML",Tt="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml",Ve=ye,Zt=!1,Qt=null,vr=C({},[bt,Tt,ye],J),_e,Nr=["application/xhtml+xml","text/html"],Er="text/html",Y,$e=null,Ar=P.createElement("form"),ji=function(u){return u instanceof RegExp||u instanceof Function},ei=function(u){$e&&$e===u||((!u||i(u)!=="object")&&(u={}),u=ce(u),_e=Nr.indexOf(u.PARSER_MEDIA_TYPE)===-1?_e=Er:_e=u.PARSER_MEDIA_TYPE,Y=_e==="application/xhtml+xml"?J:G,j="ALLOWED_TAGS"in u?C({},u.ALLOWED_TAGS,Y):Mi,q="ALLOWED_ATTR"in u?C({},u.ALLOWED_ATTR,Y):Oi,Qt="ALLOWED_NAMESPACES"in u?C({},u.ALLOWED_NAMESPACES,J):vr,Jt="ADD_URI_SAFE_ATTR"in u?C(ce(zi),u.ADD_URI_SAFE_ATTR,Y):zi,Wi="ADD_DATA_URI_TAGS"in u?C(ce(Gi),u.ADD_DATA_URI_TAGS,Y):Gi,He="FORBID_CONTENTS"in u?C({},u.FORBID_CONTENTS,Y):$i,it="FORBID_TAGS"in u?C({},u.FORBID_TAGS,Y):{},zt="FORBID_ATTR"in u?C({},u.FORBID_ATTR,Y):{},Be="USE_PROFILES"in u?u.USE_PROFILES:!1,Fi=u.ALLOW_ARIA_ATTR!==!1,jt=u.ALLOW_DATA_ATTR!==!1,Ui=u.ALLOW_UNKNOWN_PROTOCOLS||!1,Bi=u.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fe=u.SAFE_FOR_TEMPLATES||!1,qt=u.SAFE_FOR_XML!==!1,we=u.WHOLE_DOCUMENT||!1,Ue=u.RETURN_DOM||!1,dt=u.RETURN_DOM_FRAGMENT||!1,yt=u.RETURN_TRUSTED_TYPE||!1,Xt=u.FORCE_BODY||!1,Hi=u.SANITIZE_DOM!==!1,Vi=u.SANITIZE_NAMED_PROPS||!1,Kt=u.KEEP_CONTENT!==!1,nt=u.IN_PLACE||!1,Gt=u.ALLOWED_URI_REGEXP||Gt,Ve=u.NAMESPACE||ye,U=u.CUSTOM_ELEMENT_HANDLING||{},u.CUSTOM_ELEMENT_HANDLING&&ji(u.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=u.CUSTOM_ELEMENT_HANDLING.tagNameCheck),u.CUSTOM_ELEMENT_HANDLING&&ji(u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),u.CUSTOM_ELEMENT_HANDLING&&typeof u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fe&&(jt=!1),dt&&(Ue=!0),Be&&(j=C({},r(Me)),q=[],Be.html===!0&&(C(j,ve),C(q,Ne)),Be.svg===!0&&(C(j,Pe),C(q,Je),C(q,ie)),Be.svgFilters===!0&&(C(j,Ie),C(q,Je),C(q,ie)),Be.mathMl===!0&&(C(j,Ee),C(q,Ze),C(q,ie))),u.ADD_TAGS&&(j===Mi&&(j=ce(j)),C(j,u.ADD_TAGS,Y)),u.ADD_ATTR&&(q===Oi&&(q=ce(q)),C(q,u.ADD_ATTR,Y)),u.ADD_URI_SAFE_ATTR&&C(Jt,u.ADD_URI_SAFE_ATTR,Y),u.FORBID_CONTENTS&&(He===$i&&(He=ce(He)),C(He,u.FORBID_CONTENTS,Y)),Kt&&(j["#text"]=!0),we&&C(j,["html","head","body"]),j.table&&(C(j,["tbody"]),delete it.tbody),R&&R(u),$e=u)},qi=C({},["mi","mo","mn","ms","mtext"]),Yi=C({},["foreignobject","annotation-xml"]),wr=C({},["title","style","font","a","script"]),vt=C({},Pe);C(vt,Ie),C(vt,ht);var ti=C({},Ee);C(ti,ke);var _r=function(u){var b=Ft(u);(!b||!b.tagName)&&(b={namespaceURI:Ve,tagName:"template"});var v=G(u.tagName),M=G(b.tagName);return Qt[u.namespaceURI]?u.namespaceURI===Tt?b.namespaceURI===ye?v==="svg":b.namespaceURI===bt?v==="svg"&&(M==="annotation-xml"||qi[M]):!!vt[v]:u.namespaceURI===bt?b.namespaceURI===ye?v==="math":b.namespaceURI===Tt?v==="math"&&Yi[M]:!!ti[v]:u.namespaceURI===ye?b.namespaceURI===Tt&&!Yi[M]||b.namespaceURI===bt&&!qi[M]?!1:!ti[v]&&(wr[v]||!vt[v]):!!(_e==="application/xhtml+xml"&&Qt[u.namespaceURI]):!1},oe=function(u){L(E.removed,{element:u});try{u.parentNode.removeChild(u)}catch(b){try{u.outerHTML=Bt}catch(v){u.remove()}}},Nt=function(u,b){try{L(E.removed,{attribute:b.getAttributeNode(u),from:b})}catch(v){L(E.removed,{attribute:null,from:b})}if(b.removeAttribute(u),u==="is"&&!q[u])if(Ue||dt)try{oe(b)}catch(v){}else try{b.setAttribute(u,"")}catch(v){}},Xi=function(u){var b,v;if(Xt)u="<remove></remove>"+u;else{var M=fe(u,/^[\r\n\t ]+/);v=M&&M[0]}_e==="application/xhtml+xml"&&Ve===ye&&(u='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+u+"</body></html>");var ne=le?le.createHTML(u):u;if(Ve===ye)try{b=new or().parseFromString(ne,_e)}catch(X){}if(!b||!b.documentElement){b=Ht.createDocument(Ve,"template",null);try{b.documentElement.innerHTML=Zt?Bt:ne}catch(X){}}var Z=b.body||b.documentElement;return u&&v&&Z.insertBefore(P.createTextNode(v),Z.childNodes[0]||null),Ve===ye?gr.call(b,we?"html":"body")[0]:we?b.documentElement:Z},Ki=function(u){return hr.call(u.ownerDocument||u,u,Ae.SHOW_ELEMENT|Ae.SHOW_COMMENT|Ae.SHOW_TEXT|Ae.SHOW_PROCESSING_INSTRUCTION|Ae.SHOW_CDATA_SECTION,null,!1)},Ji=function(u){return u instanceof sr&&(typeof u.nodeName!="string"||typeof u.textContent!="string"||typeof u.removeChild!="function"||!(u.attributes instanceof ar)||typeof u.removeAttribute!="function"||typeof u.setAttribute!="function"||typeof u.namespaceURI!="string"||typeof u.insertBefore!="function"||typeof u.hasChildNodes!="function")},rt=function(u){return i(ae)==="object"?u instanceof ae:u&&i(u)==="object"&&typeof u.nodeType=="number"&&typeof u.nodeName=="string"},be=function(u,b,v){pe[u]&&h(pe[u],function(M){M.call(E,b,v,$e)})},Zi=function(u){var b;if(be("beforeSanitizeElements",u,null),Ji(u)||H(/[\u0080-\uFFFF]/,u.nodeName))return oe(u),!0;var v=Y(u.nodeName);if(be("uponSanitizeElement",u,{tagName:v,allowedTags:j}),u.hasChildNodes()&&!rt(u.firstElementChild)&&(!rt(u.content)||!rt(u.content.firstElementChild))&&H(/<[/\w]/g,u.innerHTML)&&H(/<[/\w]/g,u.textContent)||v==="select"&&H(/<template/i,u.innerHTML)||u.nodeType===7||qt&&u.nodeType===8&&H(/<[/\w]/g,u.data))return oe(u),!0;if(!j[v]||it[v]){if(!it[v]&&en(v)&&(U.tagNameCheck instanceof RegExp&&H(U.tagNameCheck,v)||U.tagNameCheck instanceof Function&&U.tagNameCheck(v)))return!1;if(Kt&&!He[v]){var M=Ft(u)||u.parentNode,ne=ur(u)||u.childNodes;if(ne&&M)for(var Z=ne.length,X=Z-1;X>=0;--X){var Se=lr(ne[X],!0);Se.__removalCount=(u.__removalCount||0)+1,M.insertBefore(Se,cr(u))}}return oe(u),!0}return u instanceof he&&!_r(u)||(v==="noscript"||v==="noembed"||v==="noframes")&&H(/<\/no(script|embed|frames)/i,u.innerHTML)?(oe(u),!0):(Fe&&u.nodeType===3&&(b=u.textContent,b=ee(b,Vt," "),b=ee(b,$t," "),b=ee(b,Wt," "),u.textContent!==b&&(L(E.removed,{element:u.cloneNode()}),u.textContent=b)),be("afterSanitizeElements",u,null),!1)},Qi=function(u,b,v){if(Hi&&(b==="id"||b==="name")&&(v in P||v in Ar))return!1;if(!(jt&&!zt[b]&&H(fr,b))){if(!(Fi&&H(dr,b))){if(!q[b]||zt[b]){if(!(en(u)&&(U.tagNameCheck instanceof RegExp&&H(U.tagNameCheck,u)||U.tagNameCheck instanceof Function&&U.tagNameCheck(u))&&(U.attributeNameCheck instanceof RegExp&&H(U.attributeNameCheck,b)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(b))||b==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&H(U.tagNameCheck,v)||U.tagNameCheck instanceof Function&&U.tagNameCheck(v))))return!1}else if(!Jt[b]){if(!H(Gt,ee(v,ki,""))){if(!((b==="src"||b==="xlink:href"||b==="href")&&u!=="script"&&Xe(v,"data:")===0&&Wi[u])){if(!(Ui&&!H(yr,ee(v,ki,"")))){if(v)return!1}}}}}}return!0},en=function(u){return u!=="annotation-xml"&&fe(u,br)},tn=function(u){var b,v,M,ne;be("beforeSanitizeAttributes",u,null);var Z=u.attributes;if(Z){var X={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q};for(ne=Z.length;ne--;){b=Z[ne];var Se=b,z=Se.name,ii=Se.namespaceURI;if(v=z==="value"?b.value:Ot(b.value),M=Y(z),X.attrName=M,X.attrValue=v,X.keepAttr=!0,X.forceKeepAttr=void 0,be("uponSanitizeAttribute",u,X),v=X.attrValue,qt&&H(/((--!?|])>)|<\/(style|title)/i,v)){Nt(z,u);continue}if(!X.forceKeepAttr&&(Nt(z,u),!!X.keepAttr)){if(!Bi&&H(/\/>/i,v)){Nt(z,u);continue}Fe&&(v=ee(v,Vt," "),v=ee(v,$t," "),v=ee(v,Wt," "));var nn=Y(u.nodeName);if(Qi(nn,M,v)){if(Vi&&(M==="id"||M==="name")&&(Nt(z,u),v=Tr+v),le&&i(gt)==="object"&&typeof gt.getAttributeType=="function"&&!ii)switch(gt.getAttributeType(nn,M)){case"TrustedHTML":{v=le.createHTML(v);break}case"TrustedScriptURL":{v=le.createScriptURL(v);break}}try{ii?u.setAttributeNS(ii,z,v):u.setAttribute(z,v),Ji(u)?oe(u):c(E.removed)}catch(ka){}}}}be("afterSanitizeAttributes",u,null)}},Sr=function S(u){var b,v=Ki(u);for(be("beforeSanitizeShadowDOM",u,null);b=v.nextNode();)be("uponSanitizeShadowNode",b,null),!Zi(b)&&(b.content instanceof $&&S(b.content),tn(b));be("afterSanitizeShadowDOM",u,null)};return E.sanitize=function(S){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b,v,M,ne,Z;if(Zt=!S,Zt&&(S="<!-->"),typeof S!="string"&&!rt(S))if(typeof S.toString=="function"){if(S=S.toString(),typeof S!="string")throw V("dirty is not a string, aborting")}else throw V("toString is not a function");if(!E.isSupported){if(i(N.toStaticHTML)==="object"||typeof N.toStaticHTML=="function"){if(typeof S=="string")return N.toStaticHTML(S);if(rt(S))return N.toStaticHTML(S.outerHTML)}return S}if(Yt||ei(u),E.removed=[],typeof S=="string"&&(nt=!1),nt){if(S.nodeName){var X=Y(S.nodeName);if(!j[X]||it[X])throw V("root node is forbidden and cannot be sanitized in-place")}}else if(S instanceof ae)b=Xi("<!---->"),v=b.ownerDocument.importNode(S,!0),v.nodeType===1&&v.nodeName==="BODY"||v.nodeName==="HTML"?b=v:b.appendChild(v);else{if(!Ue&&!Fe&&!we&&S.indexOf("<")===-1)return le&&yt?le.createHTML(S):S;if(b=Xi(S),!b)return Ue?null:yt?Bt:""}b&&Xt&&oe(b.firstChild);for(var Se=Ki(nt?S:b);M=Se.nextNode();)M.nodeType===3&&M===ne||Zi(M)||(M.content instanceof $&&Sr(M.content),tn(M),ne=M);if(ne=null,nt)return S;if(Ue){if(dt)for(Z=pr.call(b.ownerDocument);b.firstChild;)Z.appendChild(b.firstChild);else Z=b;return(q.shadowroot||q.shadowrootmod)&&(Z=mr.call(x,Z,!0)),Z}var z=we?b.outerHTML:b.innerHTML;return we&&j["!doctype"]&&b.ownerDocument&&b.ownerDocument.doctype&&b.ownerDocument.doctype.name&&H(er,b.ownerDocument.doctype.name)&&(z="<!DOCTYPE "+b.ownerDocument.doctype.name+`>
`+z),Fe&&(z=ee(z,Vt," "),z=ee(z,$t," "),z=ee(z,Wt," ")),le&&yt?le.createHTML(z):z},E.setConfig=function(S){ei(S),Yt=!0},E.clearConfig=function(){$e=null,Yt=!1},E.isValidAttribute=function(S,u,b){$e||ei({});var v=Y(S),M=Y(u);return Qi(v,M,b)},E.addHook=function(S,u){typeof u=="function"&&(pe[S]=pe[S]||[],L(pe[S],u))},E.removeHook=function(S){if(pe[S])return c(pe[S])},E.removeHooks=function(S){pe[S]&&(pe[S]=[])},E.removeAllHooks=function(){pe={}},E}var rr=Pi();return rr})});var Ei=De((qs,Bn)=>{Bn.exports=window.DOMPurify||(window.DOMPurify=Ni().default||Ni())});var $n=De((to,_i)=>{function Vn(i,t){if(t&&t.documentElement)i=t,t=arguments[2];else if(!i||!i.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(t=t||{},this._doc=i,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!t.debug,this._maxElemsToParse=t.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=t.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=t.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(t.classesToPreserve||[]),this._keepClasses=!!t.keepClasses,this._serializer=t.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!t.disableJSONLD,this._allowedVideoRegex=t.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(n){if(n.nodeType==n.TEXT_NODE)return`${n.nodeName} ("${n.textContent}")`;let r=Array.from(n.attributes||[],function(a){return`${a.name}="${a.value}"`}).join(" ");return`<${n.localName} ${r}>`};this.log=function(){if(typeof console!="undefined"){let r=Array.from(arguments,a=>a&&a.nodeType==this.ELEMENT_NODE?e(a):a);r.unshift("Reader: (Readability)"),console.log.apply(console,r)}else if(typeof dump!="undefined"){var n=Array.prototype.map.call(arguments,function(r){return r&&r.nodeName?e(r):r}).join(" ");dump("Reader: (Readability) "+n+`
`)}}}else this.log=function(){}}Vn.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(i){this._fixRelativeUris(i),this._simplifyNestedElements(i),this._keepClasses||this._cleanClasses(i)},_removeNodes:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var e=i.length-1;e>=0;e--){var n=i[e],r=n.parentNode;r&&(!t||t.call(this,n,e,i))&&r.removeChild(n)}},_replaceNodeTags:function(i,t){if(this._docJSDOMParser&&i._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let e of i)this._setNodeTag(e,t)},_forEachNode:function(i,t){Array.prototype.forEach.call(i,t,this)},_findNode:function(i,t){return Array.prototype.find.call(i,t,this)},_someNode:function(i,t){return Array.prototype.some.call(i,t,this)},_everyNode:function(i,t){return Array.prototype.every.call(i,t,this)},_concatNodeLists:function(){var i=Array.prototype.slice,t=i.call(arguments),e=t.map(function(n){return i.call(n)});return Array.prototype.concat.apply([],e)},_getAllNodesWithTag:function(i,t){return i.querySelectorAll?i.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(e){var n=i.getElementsByTagName(e);return Array.isArray(n)?n:Array.from(n)}))},_cleanClasses:function(i){var t=this._classesToPreserve,e=(i.getAttribute("class")||"").split(/\s+/).filter(function(n){return t.indexOf(n)!=-1}).join(" ");for(e?i.setAttribute("class",e):i.removeAttribute("class"),i=i.firstElementChild;i;i=i.nextElementSibling)this._cleanClasses(i)},_fixRelativeUris:function(i){var t=this._doc.baseURI,e=this._doc.documentURI;function n(l){if(t==e&&l.charAt(0)=="#")return l;try{return new URL(l,t).href}catch(d){}return l}var r=this._getAllNodesWithTag(i,["a"]);this._forEachNode(r,function(l){var d=l.getAttribute("href");if(d)if(d.indexOf("javascript:")===0)if(l.childNodes.length===1&&l.childNodes[0].nodeType===this.TEXT_NODE){var g=this._doc.createTextNode(l.textContent);l.parentNode.replaceChild(g,l)}else{for(var f=this._doc.createElement("span");l.firstChild;)f.appendChild(l.firstChild);l.parentNode.replaceChild(f,l)}else l.setAttribute("href",n(d))});var a=this._getAllNodesWithTag(i,["img","picture","figure","video","audio","source"]);this._forEachNode(a,function(l){var d=l.getAttribute("src"),g=l.getAttribute("poster"),f=l.getAttribute("srcset");if(d&&l.setAttribute("src",n(d)),g&&l.setAttribute("poster",n(g)),f){var y=f.replace(this.REGEXPS.srcsetUrl,function(_,O,D,I){return n(O)+(D||"")+I});l.setAttribute("srcset",y)}})},_simplifyNestedElements:function(i){for(var t=i;t;){if(t.parentNode&&["DIV","SECTION"].includes(t.tagName)&&!(t.id&&t.id.startsWith("readability"))){if(this._isElementWithoutContent(t)){t=this._removeAndGetNext(t);continue}else if(this._hasSingleTagInsideElement(t,"DIV")||this._hasSingleTagInsideElement(t,"SECTION")){for(var e=t.children[0],n=0;n<t.attributes.length;n++)e.setAttribute(t.attributes[n].name,t.attributes[n].value);t.parentNode.replaceChild(e,t),t=e;continue}}t=this._getNextNode(t)}},_getArticleTitle:function(){var i=this._doc,t="",e="";try{t=e=i.title.trim(),typeof t!="string"&&(t=e=this._getInnerText(i.getElementsByTagName("title")[0]))}catch(y){}var n=!1;function r(y){return y.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(t))n=/ [\\\/>»] /.test(t),t=e.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),r(t)<3&&(t=e.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"));else if(t.indexOf(": ")!==-1){var a=this._concatNodeLists(i.getElementsByTagName("h1"),i.getElementsByTagName("h2")),l=t.trim(),d=this._someNode(a,function(y){return y.textContent.trim()===l});d||(t=e.substring(e.lastIndexOf(":")+1),r(t)<3?t=e.substring(e.indexOf(":")+1):r(e.substr(0,e.indexOf(":")))>5&&(t=e))}else if(t.length>150||t.length<15){var g=i.getElementsByTagName("h1");g.length===1&&(t=this._getInnerText(g[0]))}t=t.trim().replace(this.REGEXPS.normalize," ");var f=r(t);return f<=4&&(!n||f!=r(e.replace(/[\|\-\\\/>»]+/g,""))-1)&&(t=e),t},_prepDocument:function(){var i=this._doc;this._removeNodes(this._getAllNodesWithTag(i,["style"])),i.body&&this._replaceBrs(i.body),this._replaceNodeTags(this._getAllNodesWithTag(i,["font"]),"SPAN")},_nextNode:function(i){for(var t=i;t&&t.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling;return t},_replaceBrs:function(i){this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(t){for(var e=t.nextSibling,n=!1;(e=this._nextNode(e))&&e.tagName=="BR";){n=!0;var r=e.nextSibling;e.parentNode.removeChild(e),e=r}if(n){var a=this._doc.createElement("p");for(t.parentNode.replaceChild(a,t),e=a.nextSibling;e;){if(e.tagName=="BR"){var l=this._nextNode(e.nextSibling);if(l&&l.tagName=="BR")break}if(!this._isPhrasingContent(e))break;var d=e.nextSibling;a.appendChild(e),e=d}for(;a.lastChild&&this._isWhitespace(a.lastChild);)a.removeChild(a.lastChild);a.parentNode.tagName==="P"&&this._setNodeTag(a.parentNode,"DIV")}})},_setNodeTag:function(i,t){if(this.log("_setNodeTag",i,t),this._docJSDOMParser)return i.localName=t.toLowerCase(),i.tagName=t.toUpperCase(),i;for(var e=i.ownerDocument.createElement(t);i.firstChild;)e.appendChild(i.firstChild);i.parentNode.replaceChild(e,i),i.readability&&(e.readability=i.readability);for(var n=0;n<i.attributes.length;n++)try{e.setAttribute(i.attributes[n].name,i.attributes[n].value)}catch(r){}return e},_prepArticle:function(i){this._cleanStyles(i),this._markDataTables(i),this._fixLazyImages(i),this._cleanConditionally(i,"form"),this._cleanConditionally(i,"fieldset"),this._clean(i,"object"),this._clean(i,"embed"),this._clean(i,"footer"),this._clean(i,"link"),this._clean(i,"aside");var t=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(i.children,function(e){this._cleanMatchedNodes(e,function(n,r){return this.REGEXPS.shareElements.test(r)&&n.textContent.length<t})}),this._clean(i,"iframe"),this._clean(i,"input"),this._clean(i,"textarea"),this._clean(i,"select"),this._clean(i,"button"),this._cleanHeaders(i),this._cleanConditionally(i,"table"),this._cleanConditionally(i,"ul"),this._cleanConditionally(i,"div"),this._replaceNodeTags(this._getAllNodesWithTag(i,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(i,["p"]),function(e){var n=e.getElementsByTagName("img").length,r=e.getElementsByTagName("embed").length,a=e.getElementsByTagName("object").length,l=e.getElementsByTagName("iframe").length,d=n+r+a+l;return d===0&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(i,["br"]),function(e){var n=this._nextNode(e.nextSibling);n&&n.tagName=="P"&&e.parentNode.removeChild(e)}),this._forEachNode(this._getAllNodesWithTag(i,["table"]),function(e){var n=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(n,"TR")){var r=n.firstElementChild;if(this._hasSingleTagInsideElement(r,"TD")){var a=r.firstElementChild;a=this._setNodeTag(a,this._everyNode(a.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(a,e)}}})},_initializeNode:function(i){switch(i.readability={contentScore:0},i.tagName){case"DIV":i.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":i.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":i.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":i.readability.contentScore-=5;break}i.readability.contentScore+=this._getClassWeight(i)},_removeAndGetNext:function(i){var t=this._getNextNode(i,!0);return i.parentNode.removeChild(i),t},_getNextNode:function(i,t){if(!t&&i.firstElementChild)return i.firstElementChild;if(i.nextElementSibling)return i.nextElementSibling;do i=i.parentNode;while(i&&!i.nextElementSibling);return i&&i.nextElementSibling},_textSimilarity:function(i,t){var e=i.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),n=t.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!e.length||!n.length)return 0;var r=n.filter(l=>!e.includes(l)),a=r.join(" ").length/n.join(" ").length;return 1-a},_checkByline:function(i,t){if(this._articleByline)return!1;if(i.getAttribute!==void 0)var e=i.getAttribute("rel"),n=i.getAttribute("itemprop");return(e==="author"||n&&n.indexOf("author")!==-1||this.REGEXPS.byline.test(t))&&this._isValidByline(i.textContent)?(this._articleByline=i.textContent.trim(),!0):!1},_getNodeAncestors:function(i,t){t=t||0;for(var e=0,n=[];i.parentNode&&(n.push(i.parentNode),!(t&&++e===t));)i=i.parentNode;return n},_grabArticle:function(i){this.log("**** grabArticle ****");var t=this._doc,e=i!==null;if(i=i||this._doc.body,!i)return this.log("No body found in document. Abort."),null;for(var n=i.innerHTML;;){this.log("Starting grabArticle loop");var r=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),a=[],l=this._doc.documentElement;let Ze=!0;for(;l;){l.tagName==="HTML"&&(this._articleLang=l.getAttribute("lang"));var d=l.className+" "+l.id;if(!this._isProbablyVisible(l)){this.log("Removing hidden node - "+d),l=this._removeAndGetNext(l);continue}if(l.getAttribute("aria-modal")=="true"&&l.getAttribute("role")=="dialog"){l=this._removeAndGetNext(l);continue}if(this._checkByline(l,d)){l=this._removeAndGetNext(l);continue}if(Ze&&this._headerDuplicatesTitle(l)){this.log("Removing header: ",l.textContent.trim(),this._articleTitle.trim()),Ze=!1,l=this._removeAndGetNext(l);continue}if(r){if(this.REGEXPS.unlikelyCandidates.test(d)&&!this.REGEXPS.okMaybeItsACandidate.test(d)&&!this._hasAncestorTag(l,"table")&&!this._hasAncestorTag(l,"code")&&l.tagName!=="BODY"&&l.tagName!=="A"){this.log("Removing unlikely candidate - "+d),l=this._removeAndGetNext(l);continue}if(this.UNLIKELY_ROLES.includes(l.getAttribute("role"))){this.log("Removing content with role "+l.getAttribute("role")+" - "+d),l=this._removeAndGetNext(l);continue}}if((l.tagName==="DIV"||l.tagName==="SECTION"||l.tagName==="HEADER"||l.tagName==="H1"||l.tagName==="H2"||l.tagName==="H3"||l.tagName==="H4"||l.tagName==="H5"||l.tagName==="H6")&&this._isElementWithoutContent(l)){l=this._removeAndGetNext(l);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(l.tagName)!==-1&&a.push(l),l.tagName==="DIV"){for(var g=null,f=l.firstChild;f;){var y=f.nextSibling;if(this._isPhrasingContent(f))g!==null?g.appendChild(f):this._isWhitespace(f)||(g=t.createElement("p"),l.replaceChild(g,f),g.appendChild(f));else if(g!==null){for(;g.lastChild&&this._isWhitespace(g.lastChild);)g.removeChild(g.lastChild);g=null}f=y}if(this._hasSingleTagInsideElement(l,"P")&&this._getLinkDensity(l)<.25){var _=l.children[0];l.parentNode.replaceChild(_,l),l=_,a.push(l)}else this._hasChildBlockElement(l)||(l=this._setNodeTag(l,"P"),a.push(l))}l=this._getNextNode(l)}var O=[];this._forEachNode(a,function(ie){if(!(!ie.parentNode||typeof ie.parentNode.tagName=="undefined")){var ue=this._getInnerText(ie);if(!(ue.length<25)){var pt=this._getNodeAncestors(ie,5);if(pt.length!==0){var Oe=0;Oe+=1,Oe+=ue.split(this.REGEXPS.commas).length,Oe+=Math.min(Math.floor(ue.length/100),3),this._forEachNode(pt,function(de,Qe){if(!(!de.tagName||!de.parentNode||typeof de.parentNode.tagName=="undefined")){if(typeof de.readability=="undefined"&&(this._initializeNode(de),O.push(de)),Qe===0)var et=1;else Qe===1?et=2:et=Qe*3;de.readability.contentScore+=Oe/et}})}}}});for(var D=[],I=0,R=O.length;I<R;I+=1){var w=O[I],m=w.readability.contentScore*(1-this._getLinkDensity(w));w.readability.contentScore=m,this.log("Candidate:",w,"with score "+m);for(var p=0;p<this._nbTopCandidates;p++){var o=D[p];if(!o||m>o.readability.contentScore){D.splice(p,0,w),D.length>this._nbTopCandidates&&D.pop();break}}}var s=D[0]||null,h=!1,c;if(s===null||s.tagName==="BODY"){for(s=t.createElement("DIV"),h=!0;i.firstChild;)this.log("Moving child out:",i.firstChild),s.appendChild(i.firstChild);i.appendChild(s),this._initializeNode(s)}else if(s){for(var L=[],G=1;G<D.length;G++)D[G].readability.contentScore/s.readability.contentScore>=.75&&L.push(this._getNodeAncestors(D[G]));var J=3;if(L.length>=J)for(c=s.parentNode;c.tagName!=="BODY";){for(var fe=0,ee=0;ee<L.length&&fe<J;ee++)fe+=Number(L[ee].includes(c));if(fe>=J){s=c;break}c=c.parentNode}s.readability||this._initializeNode(s),c=s.parentNode;for(var Xe=s.readability.contentScore,Ot=Xe/3;c.tagName!=="BODY";){if(!c.readability){c=c.parentNode;continue}var H=c.readability.contentScore;if(H<Ot)break;if(H>Xe){s=c;break}Xe=c.readability.contentScore,c=c.parentNode}for(c=s.parentNode;c.tagName!="BODY"&&c.children.length==1;)s=c,c=s.parentNode;s.readability||this._initializeNode(s)}var V=t.createElement("DIV");e&&(V.id="readability-content");var te=Math.max(10,s.readability.contentScore*.2);c=s.parentNode;for(var Ke=c.children,C=0,ce=Ke.length;C<ce;C++){var F=Ke[C],ve=!1;if(this.log("Looking at sibling node:",F,F.readability?"with score "+F.readability.contentScore:""),this.log("Sibling has score",F.readability?F.readability.contentScore:"Unknown"),F===s)ve=!0;else{var Pe=0;if(F.className===s.className&&s.className!==""&&(Pe+=s.readability.contentScore*.2),F.readability&&F.readability.contentScore+Pe>=te)ve=!0;else if(F.nodeName==="P"){var Ie=this._getLinkDensity(F),ht=this._getInnerText(F),Ee=ht.length;(Ee>80&&Ie<.25||Ee<80&&Ee>0&&Ie===0&&ht.search(/\.( |$)/)!==-1)&&(ve=!0)}}ve&&(this.log("Appending node:",F),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(F.nodeName)===-1&&(this.log("Altering sibling:",F,"to div."),F=this._setNodeTag(F,"DIV")),V.appendChild(F),Ke=c.children,C-=1,ce-=1)}if(this._debug&&this.log("Article content pre-prep: "+V.innerHTML),this._prepArticle(V),this._debug&&this.log("Article content post-prep: "+V.innerHTML),h)s.id="readability-page-1",s.className="page";else{var ke=t.createElement("DIV");for(ke.id="readability-page-1",ke.className="page";V.firstChild;)ke.appendChild(V.firstChild);V.appendChild(ke)}this._debug&&this.log("Article content after paging: "+V.innerHTML);var Me=!0,Ne=this._getInnerText(V,!0).length;if(Ne<this._charThreshold)if(Me=!1,i.innerHTML=n,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:V,textLength:Ne});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:V,textLength:Ne});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:V,textLength:Ne});else{if(this._attempts.push({articleContent:V,textLength:Ne}),this._attempts.sort(function(ie,ue){return ue.textLength-ie.textLength}),!this._attempts[0].textLength)return null;V=this._attempts[0].articleContent,Me=!0}if(Me){var Je=[c,s].concat(this._getNodeAncestors(c));return this._someNode(Je,function(ie){if(!ie.tagName)return!1;var ue=ie.getAttribute("dir");return ue?(this._articleDir=ue,!0):!1}),V}}},_isValidByline:function(i){return typeof i=="string"||i instanceof String?(i=i.trim(),i.length>0&&i.length<100):!1},_unescapeHtmlEntities:function(i){if(!i)return i;var t=this.HTML_ESCAPE_MAP;return i.replace(/&(quot|amp|apos|lt|gt);/g,function(e,n){return t[n]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(e,n,r){var a=parseInt(n||r,n?16:10);return String.fromCharCode(a)})},_getJSONLD:function(i){var t=this._getAllNodesWithTag(i,["script"]),e;return this._forEachNode(t,function(n){if(!e&&n.getAttribute("type")==="application/ld+json")try{var r=n.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),a=JSON.parse(r);if(!a["@context"]||!a["@context"].match(/^https?\:\/\/schema\.org$/)||(!a["@type"]&&Array.isArray(a["@graph"])&&(a=a["@graph"].find(function(f){return(f["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!a||!a["@type"]||!a["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(e={},typeof a.name=="string"&&typeof a.headline=="string"&&a.name!==a.headline){var l=this._getArticleTitle(),d=this._textSimilarity(a.name,l)>.75,g=this._textSimilarity(a.headline,l)>.75;g&&!d?e.title=a.headline:e.title=a.name}else typeof a.name=="string"?e.title=a.name.trim():typeof a.headline=="string"&&(e.title=a.headline.trim());a.author&&(typeof a.author.name=="string"?e.byline=a.author.name.trim():Array.isArray(a.author)&&a.author[0]&&typeof a.author[0].name=="string"&&(e.byline=a.author.filter(function(f){return f&&typeof f.name=="string"}).map(function(f){return f.name.trim()}).join(", "))),typeof a.description=="string"&&(e.excerpt=a.description.trim()),a.publisher&&typeof a.publisher.name=="string"&&(e.siteName=a.publisher.name.trim()),typeof a.datePublished=="string"&&(e.datePublished=a.datePublished.trim());return}catch(f){this.log(f.message)}}),e||{}},_getArticleMetadata:function(i){var t={},e={},n=this._doc.getElementsByTagName("meta"),r=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,a=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(n,function(l){var d=l.getAttribute("name"),g=l.getAttribute("property"),f=l.getAttribute("content");if(f){var y=null,_=null;g&&(y=g.match(r),y&&(_=y[0].toLowerCase().replace(/\s/g,""),e[_]=f.trim())),!y&&d&&a.test(d)&&(_=d,f&&(_=_.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),e[_]=f.trim()))}}),t.title=i.title||e["dc:title"]||e["dcterm:title"]||e["og:title"]||e["weibo:article:title"]||e["weibo:webpage:title"]||e.title||e["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=i.byline||e["dc:creator"]||e["dcterm:creator"]||e.author,t.excerpt=i.excerpt||e["dc:description"]||e["dcterm:description"]||e["og:description"]||e["weibo:article:description"]||e["weibo:webpage:description"]||e.description||e["twitter:description"],t.siteName=i.siteName||e["og:site_name"],t.publishedTime=i.datePublished||e["article:published_time"]||null,t.title=this._unescapeHtmlEntities(t.title),t.byline=this._unescapeHtmlEntities(t.byline),t.excerpt=this._unescapeHtmlEntities(t.excerpt),t.siteName=this._unescapeHtmlEntities(t.siteName),t.publishedTime=this._unescapeHtmlEntities(t.publishedTime),t},_isSingleImage:function(i){return i.tagName==="IMG"?!0:i.children.length!==1||i.textContent.trim()!==""?!1:this._isSingleImage(i.children[0])},_unwrapNoscriptImages:function(i){var t=Array.from(i.getElementsByTagName("img"));this._forEachNode(t,function(n){for(var r=0;r<n.attributes.length;r++){var a=n.attributes[r];switch(a.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(a.value))return}n.parentNode.removeChild(n)});var e=Array.from(i.getElementsByTagName("noscript"));this._forEachNode(e,function(n){var r=i.createElement("div");if(r.innerHTML=n.innerHTML,!!this._isSingleImage(r)){var a=n.previousElementSibling;if(a&&this._isSingleImage(a)){var l=a;l.tagName!=="IMG"&&(l=a.getElementsByTagName("img")[0]);for(var d=r.getElementsByTagName("img")[0],g=0;g<l.attributes.length;g++){var f=l.attributes[g];if(f.value!==""&&(f.name==="src"||f.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(f.value))){if(d.getAttribute(f.name)===f.value)continue;var y=f.name;d.hasAttribute(y)&&(y="data-old-"+y),d.setAttribute(y,f.value)}}n.parentNode.replaceChild(r.firstElementChild,a)}}})},_removeScripts:function(i){this._removeNodes(this._getAllNodesWithTag(i,["script","noscript"]))},_hasSingleTagInsideElement:function(i,t){return i.children.length!=1||i.children[0].tagName!==t?!1:!this._someNode(i.childNodes,function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent:function(i){return i.nodeType===this.ELEMENT_NODE&&i.textContent.trim().length==0&&(i.children.length==0||i.children.length==i.getElementsByTagName("br").length+i.getElementsByTagName("hr").length)},_hasChildBlockElement:function(i){return this._someNode(i.childNodes,function(t){return this.DIV_TO_P_ELEMS.has(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(i){return i.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(i.tagName)!==-1||(i.tagName==="A"||i.tagName==="DEL"||i.tagName==="INS")&&this._everyNode(i.childNodes,this._isPhrasingContent)},_isWhitespace:function(i){return i.nodeType===this.TEXT_NODE&&i.textContent.trim().length===0||i.nodeType===this.ELEMENT_NODE&&i.tagName==="BR"},_getInnerText:function(i,t){t=typeof t=="undefined"?!0:t;var e=i.textContent.trim();return t?e.replace(this.REGEXPS.normalize," "):e},_getCharCount:function(i,t){return t=t||",",this._getInnerText(i).split(t).length-1},_cleanStyles:function(i){if(!(!i||i.tagName.toLowerCase()==="svg")){for(var t=0;t<this.PRESENTATIONAL_ATTRIBUTES.length;t++)i.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[t]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(i.tagName)!==-1&&(i.removeAttribute("width"),i.removeAttribute("height"));for(var e=i.firstElementChild;e!==null;)this._cleanStyles(e),e=e.nextElementSibling}},_getLinkDensity:function(i){var t=this._getInnerText(i).length;if(t===0)return 0;var e=0;return this._forEachNode(i.getElementsByTagName("a"),function(n){var r=n.getAttribute("href"),a=r&&this.REGEXPS.hashUrl.test(r)?.3:1;e+=this._getInnerText(n).length*a}),e/t},_getClassWeight:function(i){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var t=0;return typeof i.className=="string"&&i.className!==""&&(this.REGEXPS.negative.test(i.className)&&(t-=25),this.REGEXPS.positive.test(i.className)&&(t+=25)),typeof i.id=="string"&&i.id!==""&&(this.REGEXPS.negative.test(i.id)&&(t-=25),this.REGEXPS.positive.test(i.id)&&(t+=25)),t},_clean:function(i,t){var e=["object","embed","iframe"].indexOf(t)!==-1;this._removeNodes(this._getAllNodesWithTag(i,[t]),function(n){if(e){for(var r=0;r<n.attributes.length;r++)if(this._allowedVideoRegex.test(n.attributes[r].value))return!1;if(n.tagName==="object"&&this._allowedVideoRegex.test(n.innerHTML))return!1}return!0})},_hasAncestorTag:function(i,t,e,n){e=e||3,t=t.toUpperCase();for(var r=0;i.parentNode;){if(e>0&&r>e)return!1;if(i.parentNode.tagName===t&&(!n||n(i.parentNode)))return!0;i=i.parentNode,r++}return!1},_getRowAndColumnCount:function(i){for(var t=0,e=0,n=i.getElementsByTagName("tr"),r=0;r<n.length;r++){var a=n[r].getAttribute("rowspan")||0;a&&(a=parseInt(a,10)),t+=a||1;for(var l=0,d=n[r].getElementsByTagName("td"),g=0;g<d.length;g++){var f=d[g].getAttribute("colspan")||0;f&&(f=parseInt(f,10)),l+=f||1}e=Math.max(e,l)}return{rows:t,columns:e}},_markDataTables:function(i){for(var t=i.getElementsByTagName("table"),e=0;e<t.length;e++){var n=t[e],r=n.getAttribute("role");if(r=="presentation"){n._readabilityDataTable=!1;continue}var a=n.getAttribute("datatable");if(a=="0"){n._readabilityDataTable=!1;continue}var l=n.getAttribute("summary");if(l){n._readabilityDataTable=!0;continue}var d=n.getElementsByTagName("caption")[0];if(d&&d.childNodes.length>0){n._readabilityDataTable=!0;continue}var g=["col","colgroup","tfoot","thead","th"],f=function(_){return!!n.getElementsByTagName(_)[0]};if(g.some(f)){this.log("Data table because found data-y descendant"),n._readabilityDataTable=!0;continue}if(n.getElementsByTagName("table")[0]){n._readabilityDataTable=!1;continue}var y=this._getRowAndColumnCount(n);if(y.rows>=10||y.columns>4){n._readabilityDataTable=!0;continue}n._readabilityDataTable=y.rows*y.columns>10}},_fixLazyImages:function(i){this._forEachNode(this._getAllNodesWithTag(i,["img","picture","figure"]),function(t){if(t.src&&this.REGEXPS.b64DataUrl.test(t.src)){var e=this.REGEXPS.b64DataUrl.exec(t.src);if(e[1]==="image/svg+xml")return;for(var n=!1,r=0;r<t.attributes.length;r++){var a=t.attributes[r];if(a.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(a.value)){n=!0;break}}if(n){var l=t.src.search(/base64\s*/i)+7,d=t.src.length-l;d<133&&t.removeAttribute("src")}}if(!((t.src||t.srcset&&t.srcset!="null")&&t.className.toLowerCase().indexOf("lazy")===-1)){for(var g=0;g<t.attributes.length;g++)if(a=t.attributes[g],!(a.name==="src"||a.name==="srcset"||a.name==="alt")){var f=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(a.value)?f="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(a.value)&&(f="src"),f){if(t.tagName==="IMG"||t.tagName==="PICTURE")t.setAttribute(f,a.value);else if(t.tagName==="FIGURE"&&!this._getAllNodesWithTag(t,["img","picture"]).length){var y=this._doc.createElement("img");y.setAttribute(f,a.value),t.appendChild(y)}}}}})},_getTextDensity:function(i,t){var e=this._getInnerText(i,!0).length;if(e===0)return 0;var n=0,r=this._getAllNodesWithTag(i,t);return this._forEachNode(r,a=>n+=this._getInnerText(a,!0).length),n/e},_cleanConditionally:function(i,t){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(i,[t]),function(e){var n=function(c){return c._readabilityDataTable},r=t==="ul"||t==="ol";if(!r){var a=0,l=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(l,c=>a+=this._getInnerText(c).length),r=a/this._getInnerText(e).length>.9}if(t==="table"&&n(e)||this._hasAncestorTag(e,"table",-1,n)||this._hasAncestorTag(e,"code"))return!1;var d=this._getClassWeight(e);this.log("Cleaning Conditionally",e);var g=0;if(d+g<0)return!0;if(this._getCharCount(e,",")<10){for(var f=e.getElementsByTagName("p").length,y=e.getElementsByTagName("img").length,_=e.getElementsByTagName("li").length-100,O=e.getElementsByTagName("input").length,D=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),I=0,R=this._getAllNodesWithTag(e,["object","embed","iframe"]),w=0;w<R.length;w++){for(var m=0;m<R[w].attributes.length;m++)if(this._allowedVideoRegex.test(R[w].attributes[m].value))return!1;if(R[w].tagName==="object"&&this._allowedVideoRegex.test(R[w].innerHTML))return!1;I++}var p=this._getLinkDensity(e),o=this._getInnerText(e).length,s=y>1&&f/y<.5&&!this._hasAncestorTag(e,"figure")||!r&&_>f||O>Math.floor(f/3)||!r&&D<.9&&o<25&&(y===0||y>2)&&!this._hasAncestorTag(e,"figure")||!r&&d<25&&p>.2||d>=25&&p>.5||I===1&&o<75||I>1;if(r&&s){for(var h=0;h<e.children.length;h++)if(e.children[h].children.length>1)return s;let c=e.getElementsByTagName("li").length;if(y==c)return!1}return s}return!1})},_cleanMatchedNodes:function(i,t){for(var e=this._getNextNode(i,!0),n=this._getNextNode(i);n&&n!=e;)t.call(this,n,n.className+" "+n.id)?n=this._removeAndGetNext(n):n=this._getNextNode(n)},_cleanHeaders:function(i){let t=this._getAllNodesWithTag(i,["h1","h2"]);this._removeNodes(t,function(e){let n=this._getClassWeight(e)<0;return n&&this.log("Removing header with low class weight:",e),n})},_headerDuplicatesTitle:function(i){if(i.tagName!="H1"&&i.tagName!="H2")return!1;var t=this._getInnerText(i,!1);return this.log("Evaluating similarity of header:",t,this._articleTitle),this._textSimilarity(this._articleTitle,t)>.75},_flagIsActive:function(i){return(this._flags&i)>0},_removeFlag:function(i){this._flags=this._flags&~i},_isProbablyVisible:function(i){return(!i.style||i.style.display!="none")&&(!i.style||i.style.visibility!="hidden")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var i=this._doc.getElementsByTagName("*").length;if(i>this._maxElemsToParse)throw new Error("Aborting parsing document; "+i+" elements found")}this._unwrapNoscriptImages(this._doc);var t=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var e=this._getArticleMetadata(t);this._articleTitle=e.title;var n=this._grabArticle();if(!n)return null;if(this.log("Grabbed: "+n.innerHTML),this._postProcessContent(n),!e.excerpt){var r=n.getElementsByTagName("p");r.length>0&&(e.excerpt=r[0].textContent.trim())}var a=n.textContent;return{title:this._articleTitle,byline:e.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(n),textContent:a,length:a.length,excerpt:e.excerpt,siteName:e.siteName||this._articleSiteName,publishedTime:e.publishedTime}}};typeof _i=="object"&&(_i.exports=Vn)});var Gn=De((io,Si)=>{var Wn={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function Da(i){return(!i.style||i.style.display!="none")&&!i.hasAttribute("hidden")&&(!i.hasAttribute("aria-hidden")||i.getAttribute("aria-hidden")!="true"||i.className&&i.className.indexOf&&i.className.indexOf("fallback-image")!==-1)}function Ra(i,t={}){typeof t=="function"&&(t={visibilityChecker:t});var e={minScore:20,minContentLength:140,visibilityChecker:Da};t=Object.assign(e,t);var n=i.querySelectorAll("p, pre, article"),r=i.querySelectorAll("div > br");if(r.length){var a=new Set(n);[].forEach.call(r,function(d){a.add(d.parentNode)}),n=Array.from(a)}var l=0;return[].some.call(n,function(d){if(!t.visibilityChecker(d))return!1;var g=d.className+" "+d.id;if(Wn.unlikelyCandidates.test(g)&&!Wn.okMaybeItsACandidate.test(g)||d.matches("li p"))return!1;var f=d.textContent.trim().length;return f<t.minContentLength?!1:(l+=Math.sqrt(f-t.minContentLength),l>t.minScore)})}typeof Si=="object"&&(Si.exports=Ra)});var jn=De((no,zn)=>{var xa=$n(),Ca=Gn();zn.exports={Readability:xa,isProbablyReaderable:Ca}});var Ia={};Ir(Ia,{default:()=>Mt});module.exports=kr(Ia);var me=require("obsidian");var an=require("obsidian");async function ni(i){return{fileContent:await(await(0,an.requestUrl)({url:i.href,method:"get"})).arrayBuffer,fileExtension:i.pathname.slice(i.pathname.lastIndexOf(".")+1)}}var Et=require("obsidian");async function st(i,t){t=(0,Et.normalizePath)(t);let e=i.getAbstractFileByPath(t);e&&e instanceof Et.TFolder||await i.createFolder(t)}var hn=require("path");var At="http:",wt="https:";var sn=We(require("path")),on=require("obsidian");function ge(i,t=[]){let e;try{e=new URL(i)}catch(n){return!1}return t.length===0?!0:t.includes(e.protocol)}function ri(i,t){return new URL(i,t).href}function re(i){return i.replace(/[:#/\\|?*<>"]/g,"")}function _t(i,t){let e=sn.default.join(i,t);return(0,on.normalizePath)(e.replace(/\\/g,"/"))}var ai=We(un());var si=class{constructor(){k(this,"linksInfo",{})}ensureHashGenerated(t,e){this.linksInfo[t.href]||(this.linksInfo[t.href]=ai.ArrayBuffer.hash(e))}isSame(t,e){let n=ai.ArrayBuffer.hash(e);return this.linksInfo[t.href]==n}},St=new si;var Mr=/!\[(?<anchor>.*?)\]\((?<link>.+?)\)/g;async function Re(i,t,e){return await Or(t,Mr,Ur(i,e))}function Or(i,t,e){try{if(typeof e=="function"){let n=[];return String.prototype.replace.call(i,t,function(r,a,l){return n.push(e(r,a,l)),""}),Promise.all(n).then(function(r){return String.prototype.replace.call(i,t,function(){return r.shift()})})}else return Promise.resolve(String.prototype.replace.call(i,t,e))}catch(n){return console.error(),Promise.reject(n)}}var Fr=5;function Ur(i,t){return async function(n,r,a){if(!ge(a,[At,wt]))return n;let l=new URL(a);await st(i.vault,t);try{let{fileContent:d,fileExtension:g}=await ni(l),f=0;for(;f<Fr;)try{let{fileName:y,needWrite:_}=await Vr(i.vault.adapter,t,r,l,d,g);if(_&&y&&await i.vault.createBinary(y,d),y){let O=y.replace(/\s/g,"%20");return`![${r}](${O})`}else return n}catch(y){if(y.message==="File already exists.")f++;else throw y}return n}catch(d){return console.warn("Image processing failed: ",d),n}}}var Br="media",Hr=1e3;async function Vr(i,t,e,n,r,a){if(!a)return{fileName:"",needWrite:!1};e||(e=(0,hn.basename)(n.pathname)),e||(e=Br),e.endsWith(`.${a}`)&&(e=e.slice(0,-1*(a.length+1))),e=re(e);let l="",d=!0,g=0;for(;!l&&g<Hr;){let f=g?_t(t,`${e}-${g}.${a}`):_t(t,`${e}.${a}`);if(await i.exists(f,!1)){St.ensureHashGenerated(n,r);let y=await i.readBinary(f);St.isSame(n,y)&&(l=f,d=!1)}else l=f;g++}if(!l)throw new Error("Failed to generate file name for media file.");return St.ensureHashGenerated(n,r),{fileName:l,needWrite:d}}var pn=require("obsidian");function Dt(i){throw new pn.Notice("Error occured. Please check console output for detailed information."),i}var gn=require("obsidian");function Ge(i,t){return(0,gn.moment)(i).format(t)}function mn(){return[{label:"New Line",option:"newLine"},{label:"Comma",option:"comma"},{label:"Period",option:"period"},{label:"Semicolon",option:"semicolon"}]}function fn(i){switch(i){case"newLine":return`
`;case"comma":return",";case"period":return".";case"semicolon":return";"}}var T={inboxDir:"ReadItLater Inbox",assetsDir:"ReadItLater Inbox/assets",openNewNote:!1,batchProcess:!1,batchProcessDelimiter:"newLine",openNewNoteInNewTab:!1,youtubeContentTypeSlug:"youtube",youtubeNoteTitle:"Youtube - {{ title }}",youtubeNote:`[[ReadItLater]] [[Youtube]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,youtubeEmbedWidth:"560",youtubeEmbedHeight:"315",youtubeUsePrivacyEnhancedEmbed:!0,vimeoContentTypeSlug:"vimeo",vimeoNoteTitle:"Vimeo - {{ title }}",vimeoNote:`[[ReadItLater]] [[Vimeo]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,vimeoEmbedWidth:"560",vimeoEmbedHeight:"315",bilibiliContentTypeSlug:"bilibili",bilibiliNoteTitle:"Bilibili - {{ title }}",bilibiliNote:`[[ReadItLater]] [[Bilibili]]

# [{{ videoTitle }}]({{ videoURL }})

{{ videoPlayer }}`,bilibiliEmbedWidth:"560",bilibiliEmbedHeight:"315",twitterContentTypeSlug:"xcom",twitterNoteTitle:"Tweet from {{ tweetAuthorName }} ({{ date }})",twitterNote:`[[ReadItLater]] [[Tweet]]

# [{{ tweetAuthorName }}]({{ tweetURL }})

{{ tweetContent }}`,parseableArticleContentType:"article",parseableArticleNoteTitle:"{{ title }}",parsableArticleNote:`[[ReadItLater]] [[Article]]

# [{{ articleTitle }}]({{ articleURL }})

{{ articleContent }}`,notParseableArticleContentType:"article",notParseableArticleNoteTitle:"Article {{ date }}",notParsableArticleNote:`[[ReadItLater]] [[Article]]

[{{ articleURL }}]({{ articleURL }})`,textSnippetContentType:"textsnippet",textSnippetNoteTitle:"Note {{ date }}",textSnippetNote:`[[ReadItLater]] [[Textsnippet]]

{{ content }}`,mastodonContentTypeSlug:"mastodon",mastodonNoteTitle:"Toot from {{ tootAuthorName }} ({{ date }})",mastodonNote:`[[ReadItLater]] [[Toot]]

# [{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,downloadImages:!0,downloadImagesInArticleDir:!1,dateTitleFmt:"YYYY-MM-DD HH-mm-ss",dateContentFmt:"YYYY-MM-DD",downloadMastodonMediaAttachments:!0,downloadMastodonMediaAttachmentsInDir:!1,saveMastodonReplies:!1,mastodonReply:`[{{ tootAuthorName }}]({{ tootURL }})

> {{ tootContent }}`,stackExchangeContentType:"stackexchange",stackExchangeNoteTitle:"{{ title }}",stackExchangeNote:`[[ReadItLater]] [[StackExchange]]

# [{{ questionTitle }}]({{ questionURL }})

Author: [{{ authorName }}]({{ authorProfileURL }})

{{ questionContent }}

***

{{ topAnswer }}

{{ answers }}`,stackExchangeAnswer:`Answered by: [{{ authorName }}]({{ authorProfileURL }})

{{ answerContent }}`,downloadStackExchangeAssets:!0,downloadStackExchangeAssetsInDir:!1,youtubeApiKey:"",tikTokContentTypeSlug:"tiktok",tikTokNoteTitle:"TikTok from {{ authorName }} ({{ date }})",tikTokNote:`[[ReadItLater]] [[TikTok]]

{{ videoDescription }}

[{{ videoURL }}]({{ videoURL }})

{{ videoPlayer }}`,tikTokEmbedWidth:"325",tikTokEmbedHeight:"760",extendShareMenu:!0};var A=require("obsidian");var Rt=class extends A.PluginSettingTab{constructor(e,n){super(e,n);k(this,"plugin");this.plugin=n}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"General"}),new A.Setting(e).setName("Inbox directory").setDesc("Enter valid directory name. For nested directory use this format: Directory A/Directory B. If no directory is entered, new note will be created in vault root.").addText(n=>n.setPlaceholder("Defaults to vault root directory").setValue(typeof this.plugin.settings.inboxDir=="undefined"?T.inboxDir:this.plugin.settings.inboxDir).onChange(async r=>{this.plugin.settings.inboxDir=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Assets directory").setDesc("Enter valid directory name. For nested directory use this format: Directory A/Directory B. If no directory is entered, new note will be created in Vault root.").addText(n=>n.setPlaceholder("Defaults to vault root directory").setValue(typeof this.plugin.settings.assetsDir=="undefined"?T.inboxDir+"/assets":this.plugin.settings.assetsDir).onChange(async r=>{this.plugin.settings.assetsDir=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Open new note in current workspace").setDesc("If enabled, new note will open in current workspace").addToggle(n=>n.setValue(this.plugin.settings.openNewNote||T.openNewNote).onChange(async r=>{this.plugin.settings.openNewNote=r,r===!0&&(this.plugin.settings.openNewNoteInNewTab=!1),await this.plugin.saveSettings(),this.display()})),new A.Setting(e).setName("Open new note in new tab").setDesc("If enabled, new note will open in new tab").addToggle(n=>n.setValue(this.plugin.settings.openNewNoteInNewTab||T.openNewNoteInNewTab).onChange(async r=>{this.plugin.settings.openNewNoteInNewTab=r,r===!0&&(this.plugin.settings.openNewNote=!1),await this.plugin.saveSettings(),this.display()})),new A.Setting(e).setName("Batch process URLs").setDesc("If enabled, a list of URLs will processed in sequence. Delimiter can be set in setting bellow.").addToggle(n=>{var r;return n.setValue((r=this.plugin.settings.batchProcess)!=null?r:T.batchProcess).onChange(async a=>{this.plugin.settings.batchProcess=a,await this.plugin.saveSettings()})}),new A.Setting(e).setName("Batch note creation delimiter").setDesc("Delimiter for batch list of notes").addDropdown(n=>{mn().forEach(r=>n.addOption(r.option,r.label)),n.setValue(this.plugin.settings.batchProcessDelimiter||T.batchProcessDelimiter),n.onChange(async r=>{this.plugin.settings.batchProcessDelimiter=r,await this.plugin.saveSettings()})}),new A.Setting(e).setName("Date format string").setDesc("Format of the %date% variable. NOTE: do not use symbols forbidden in file names.").addText(n=>n.setPlaceholder(`Defaults to ${T.dateTitleFmt}`).setValue(typeof this.plugin.settings.dateTitleFmt=="undefined"?T.dateTitleFmt:this.plugin.settings.dateTitleFmt).onChange(async r=>{this.plugin.settings.dateTitleFmt=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Date format string in content").setDesc("Format of the %date% variable for content").addText(n=>n.setPlaceholder(`Defaults to ${T.dateContentFmt}`).setValue(typeof this.plugin.settings.dateContentFmt=="undefined"?T.dateContentFmt:this.plugin.settings.dateContentFmt).onChange(async r=>{this.plugin.settings.dateContentFmt=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Extend share menu").setDesc("If enabled, share menu will be extended with shortcut to create note directly from it. Requires plugin reload or Obsidian restart to apply change.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"extendShareMenu")?this.plugin.settings.extendShareMenu:T.extendShareMenu).onChange(async r=>{this.plugin.settings.extendShareMenu=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"YouTube"}),new A.Setting(e).setName("Youtube content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.youtubeContentTypeSlug}`).setValue(typeof this.plugin.settings.youtubeContentTypeSlug=="undefined"?T.youtubeContentTypeSlug:this.plugin.settings.youtubeContentTypeSlug).onChange(async r=>{this.plugin.settings.youtubeContentTypeSlug=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Youtube note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.youtubeNoteTitle}`).setValue(this.plugin.settings.youtubeNoteTitle||T.youtubeNoteTitle).onChange(async r=>{this.plugin.settings.youtubeNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Youtube note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.youtubeNote||T.youtubeNote).onChange(async r=>{this.plugin.settings.youtubeNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Youtube Data API v3 key").setDesc("If entered, additional template variables are available").addText(n=>n.setPlaceholder("").setValue(this.plugin.settings.youtubeApiKey||T.youtubeApiKey).onChange(async r=>{this.plugin.settings.youtubeApiKey=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Youtube embed player width").addText(n=>n.setPlaceholder(T.youtubeEmbedWidth).setValue(this.plugin.settings.youtubeEmbedWidth||T.youtubeEmbedWidth).onChange(async r=>{this.plugin.settings.youtubeEmbedWidth=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Youtube embed player height").addText(n=>n.setPlaceholder(T.youtubeEmbedHeight).setValue(this.plugin.settings.youtubeEmbedHeight||T.youtubeEmbedHeight).onChange(async r=>{this.plugin.settings.youtubeEmbedHeight=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Embed in privacy enhanced mode").setDesc("If enabled, content will be embeded in privacy enhanced mode, which prevents the use of views of it from influencing the viewer\u2019s browsing experience on YouTube.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"youtubeUsePrivacyEnhancedEmbed")?this.plugin.settings.youtubeUsePrivacyEnhancedEmbed:T.youtubeUsePrivacyEnhancedEmbed).onChange(async r=>{this.plugin.settings.youtubeUsePrivacyEnhancedEmbed=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Vimeo"}),new A.Setting(e).setName("Vimeo content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.vimeoContentTypeSlug}`).setValue(typeof this.plugin.settings.vimeoContentTypeSlug=="undefined"?T.vimeoContentTypeSlug:this.plugin.settings.vimeoContentTypeSlug).onChange(async r=>{this.plugin.settings.vimeoContentTypeSlug=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Vimeo note title template").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.vimeoNoteTitle||T.vimeoNoteTitle).onChange(async r=>{this.plugin.settings.vimeoNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Vimeo note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.vimeoNote||T.vimeoNote).onChange(async r=>{this.plugin.settings.vimeoNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Vimeo embed player width").addText(n=>n.setPlaceholder(T.vimeoEmbedWidth).setValue(this.plugin.settings.vimeoEmbedWidth||T.vimeoEmbedWidth).onChange(async r=>{this.plugin.settings.vimeoEmbedWidth=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Vimeo embed player height").addText(n=>n.setPlaceholder(T.vimeoEmbedHeight).setValue(this.plugin.settings.vimeoEmbedHeight||T.vimeoEmbedHeight).onChange(async r=>{this.plugin.settings.vimeoEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Bilibili"}),new A.Setting(e).setName("Bilibili content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.bilibiliContentTypeSlug}`).setValue(typeof this.plugin.settings.bilibiliContentTypeSlug=="undefined"?T.bilibiliContentTypeSlug:this.plugin.settings.bilibiliContentTypeSlug).onChange(async r=>{this.plugin.settings.bilibiliContentTypeSlug=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Bilibili note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.bilibiliNoteTitle||T.bilibiliNoteTitle).onChange(async r=>{this.plugin.settings.bilibiliNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Bilibili note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.bilibiliNote||T.bilibiliNote).onChange(async r=>{this.plugin.settings.bilibiliNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Bilibili embed player width").addText(n=>n.setPlaceholder(T.bilibiliEmbedWidth).setValue(this.plugin.settings.bilibiliEmbedWidth||T.bilibiliEmbedWidth).onChange(async r=>{this.plugin.settings.bilibiliEmbedWidth=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Bilibili embed player height").addText(n=>n.setPlaceholder(T.bilibiliEmbedHeight).setValue(this.plugin.settings.bilibiliEmbedHeight||T.bilibiliEmbedHeight).onChange(async r=>{this.plugin.settings.bilibiliEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Twitter"}),new A.Setting(e).setName("Twitter content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.twitterContentTypeSlug}`).setValue(typeof this.plugin.settings.twitterContentTypeSlug=="undefined"?T.twitterContentTypeSlug:this.plugin.settings.twitterContentTypeSlug).onChange(async r=>{this.plugin.settings.twitterContentTypeSlug=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Twitter note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %tweetAuthorName%").setValue(this.plugin.settings.twitterNoteTitle||T.twitterNoteTitle).onChange(async r=>{this.plugin.settings.twitterNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Twitter note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.twitterNote||T.twitterNote).onChange(async r=>{this.plugin.settings.twitterNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"Stack Exchange"}),new A.Setting(e).setName("Stack Exchange content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.stackExchangeContentType}`).setValue(typeof this.plugin.settings.stackExchangeContentType=="undefined"?T.stackExchangeContentType:this.plugin.settings.stackExchangeContentType).onChange(async r=>{this.plugin.settings.stackExchangeContentType=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Stack Exchange note title template").addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.stackExchangeNoteTitle||T.stackExchangeNoteTitle).onChange(async r=>{this.plugin.settings.stackExchangeNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Stack Exchange question note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.stackExchangeNote||T.stackExchangeNote).onChange(async r=>{this.plugin.settings.stackExchangeNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Stack Exchange answer template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.stackExchangeAnswer||T.stackExchangeAnswer).onChange(async r=>{this.plugin.settings.stackExchangeAnswer=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Download media attachments").setDesc("Media attachments will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssets")?this.plugin.settings.downloadStackExchangeAssets:T.downloadStackExchangeAssets).onChange(async r=>{this.plugin.settings.downloadStackExchangeAssets=r,r===!1&&(this.plugin.settings.downloadStackExchangeAssetsInDir=!1),await this.plugin.saveSettings(),this.display()})),new A.Setting(e).setName("Download media attachments to note directory").setDesc("Media attachments will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadStackExchangeAssetsInDir")?this.plugin.settings.downloadStackExchangeAssetsInDir:T.downloadStackExchangeAssetsInDir).onChange(async r=>{this.plugin.settings.downloadStackExchangeAssetsInDir=r,r===!0&&(this.plugin.settings.downloadStackExchangeAssets=!0),await this.plugin.saveSettings(),this.display()})),e.createEl("h2",{text:"Mastodon"}),new A.Setting(e).setName("Mastodon content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.mastodonContentTypeSlug}`).setValue(typeof this.plugin.settings.mastodonContentTypeSlug=="undefined"?T.mastodonContentTypeSlug:this.plugin.settings.mastodonContentTypeSlug).onChange(async r=>{this.plugin.settings.mastodonContentTypeSlug=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Mastodon note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %tootAuthorName%").setValue(this.plugin.settings.mastodonNoteTitle||T.mastodonNoteTitle).onChange(async r=>{this.plugin.settings.mastodonNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Mastodon note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.mastodonNote||T.mastodonNote).onChange(async r=>{this.plugin.settings.mastodonNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Download media attachments").setDesc("Media attachments will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachments")?this.plugin.settings.downloadMastodonMediaAttachments:T.downloadMastodonMediaAttachments).onChange(async r=>{this.plugin.settings.downloadMastodonMediaAttachments=r,r===!1&&(this.plugin.settings.downloadMastodonMediaAttachmentsInDir=!1),await this.plugin.saveSettings(),this.display()})),new A.Setting(e).setName("Download media attachments to note directory").setDesc("Media attachments will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadMastodonMediaAttachmentsInDir")?this.plugin.settings.downloadMastodonMediaAttachmentsInDir:T.downloadMastodonMediaAttachmentsInDir).onChange(async r=>{this.plugin.settings.downloadMastodonMediaAttachmentsInDir=r,r===!0&&(this.plugin.settings.downloadMastodonMediaAttachments=!0),await this.plugin.saveSettings(),this.display()})),new A.Setting(e).setName("Save replies").setDesc("If enabled, replies of toot will be saved.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"saveMastodonReplies")?this.plugin.settings.saveMastodonReplies:T.saveMastodonReplies).onChange(async r=>{this.plugin.settings.saveMastodonReplies=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Mastodon reply template").addTextArea(n=>{n.setValue(this.plugin.settings.mastodonReply||T.mastodonReply).onChange(async r=>{this.plugin.settings.mastodonReply=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"TikTok"}),new A.Setting(e).setName("TikTok content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.tikTokContentTypeSlug}`).setValue(typeof this.plugin.settings.tikTokContentTypeSlug=="undefined"?T.tikTokContentTypeSlug:this.plugin.settings.tikTokContentTypeSlug).onChange(async r=>{this.plugin.settings.tikTokContentTypeSlug=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("TikTok note title template").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("TikTok from %authorName% (%date%)").setValue(this.plugin.settings.tikTokNoteTitle||T.tikTokNoteTitle).onChange(async r=>{this.plugin.settings.tikTokNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("TikTok note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.tikTokNote||T.tikTokNote).onChange(async r=>{this.plugin.settings.tikTokNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("TikTok embed player width").addText(n=>n.setPlaceholder(T.tikTokEmbedWidth).setValue(this.plugin.settings.tikTokEmbedWidth||T.tikTokEmbedWidth).onChange(async r=>{this.plugin.settings.tikTokEmbedWidth=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("TikTok embed player height").addText(n=>n.setPlaceholder(T.tikTokEmbedHeight).setValue(this.plugin.settings.tikTokEmbedHeight||T.tikTokEmbedHeight).onChange(async r=>{this.plugin.settings.tikTokEmbedHeight=r,await this.plugin.saveSettings()})),e.createEl("h2",{text:"Readable Article"}),new A.Setting(e).setName("Readable content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.parseableArticleContentType}`).setValue(typeof this.plugin.settings.parseableArticleContentType=="undefined"?T.parseableArticleContentType:this.plugin.settings.parseableArticleContentType).onChange(async r=>{this.plugin.settings.parseableArticleContentType=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Readable article note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to %title%").setValue(this.plugin.settings.parseableArticleNoteTitle||T.parseableArticleNoteTitle).onChange(async r=>{this.plugin.settings.parseableArticleNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Readable article note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.parsableArticleNote||T.parsableArticleNote).onChange(async r=>{this.plugin.settings.parsableArticleNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),new A.Setting(e).setName("Download images").setDesc("Images from article will be downloaded to the assets directory (Desktop App feature only). To dynamically change destination directory you can use variables. Check variables reference to learn more.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImages")?this.plugin.settings.downloadImages:T.downloadImages).onChange(async r=>{this.plugin.settings.downloadImages=r,r===!1&&(this.plugin.settings.downloadImagesInArticleDir=!1),await this.plugin.saveSettings(),this.display()})),new A.Setting(e).setName("Download images to note directory").setDesc("Images from article will be downloaded to the dedicated note assets directory (Desktop App feature only). Overrides assets directory template.").addToggle(n=>n.setValue(Object.prototype.hasOwnProperty.call(this.plugin.settings,"downloadImagesInArticleDir")?this.plugin.settings.downloadImagesInArticleDir:T.downloadImagesInArticleDir).onChange(async r=>{this.plugin.settings.downloadImagesInArticleDir=r,r===!0&&(this.plugin.settings.downloadImages=!0),await this.plugin.saveSettings(),this.display()})),e.createEl("h2",{text:"Nonreadable Article"}),new A.Setting(e).setName("Nonreadable content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.notParseableArticleContentType}`).setValue(typeof this.plugin.settings.notParseableArticleContentType=="undefined"?T.notParseableArticleContentType:this.plugin.settings.notParseableArticleContentType).onChange(async r=>{this.plugin.settings.notParseableArticleContentType=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Nonreadable article note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to 'Article %date%'").setValue(this.plugin.settings.notParseableArticleNoteTitle||T.notParseableArticleNoteTitle).onChange(async r=>{this.plugin.settings.notParseableArticleNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Nonreadable article note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.notParsableArticleNote||T.notParsableArticleNote).onChange(async r=>{this.plugin.settings.notParsableArticleNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25}),e.createEl("h2",{text:"Text Snippet"}),new A.Setting(e).setName("Text Snippet content type slug").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder(`Defaults to ${T.textSnippetContentType}`).setValue(typeof this.plugin.settings.textSnippetContentType=="undefined"?T.textSnippetContentType:this.plugin.settings.textSnippetContentType).onChange(async r=>{this.plugin.settings.textSnippetContentType=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Text snippet note template title").setDesc(this.createTemplateVariableReferenceDiv()).addText(n=>n.setPlaceholder("Defaults to 'Note %date%'").setValue(this.plugin.settings.textSnippetNoteTitle||T.textSnippetNoteTitle).onChange(async r=>{this.plugin.settings.textSnippetNoteTitle=r,await this.plugin.saveSettings()})),new A.Setting(e).setName("Text snippet note template").setDesc(this.createTemplateVariableReferenceDiv()).addTextArea(n=>{n.setValue(this.plugin.settings.textSnippetNote||T.textSnippetNote).onChange(async r=>{this.plugin.settings.textSnippetNote=r,await this.plugin.saveSettings()}),n.inputEl.rows=10,n.inputEl.cols=25})}createHTMLDiv(e){return createFragment(n=>n.createDiv().innerHTML=e)}createTemplateVariableReferenceDiv(e=""){return this.createHTMLDiv(`<p>${e} See the <a href="https://github.com/DominikPieper/obsidian-ReadItLater?tab=readme-ov-file#template-engine">template variables reference</a></p>`)}};var xe=require("obsidian"),xt=We(yn());var B=class{constructor(t,e,n,r,a){this.fileName=t;this.fileExtension=e;this.content=n;this.contentType=r;this.createdAt=a;this.fileName=re(this.fileName)}getFullFilename(){return`${this.fileName}.${this.fileExtension}`}};var W=class{constructor(t,e,n){k(this,"app");k(this,"settings");k(this,"templateEngine");this.app=t,this.settings=e,this.templateEngine=n}isValidUrl(t){return ge(t)}getFormattedDateForFilename(t){return Ge(t,this.settings.dateTitleFmt)}getFormattedDateForContent(t){return Ge(t,this.settings.dateContentFmt)}};var li=class extends W{constructor(e,n,r){super(e,n,r);k(this,"PATTERN",/(youtube.com|youtu.be)\/(watch|shorts)?(\?v=|\/)?([^&#?]*)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new Date,r=this.settings.youtubeApiKey===""?await this.parseSchema(e,n):await this.parseApiResponse(e,n),a=this.templateEngine.render(this.settings.youtubeNote,r),l=this.templateEngine.render(this.settings.youtubeNoteTitle,{title:r.videoTitle,date:this.getFormattedDateForFilename(n)});return new B(l,"md",a,this.settings.youtubeContentTypeSlug,n)}async parseApiResponse(e,n){var a,l,d,g,f,y,_,O,D,I;let r=this.PATTERN.exec(e)[4];try{let R=await(0,xe.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet,statistics,status,topicDetails&id=${r}&key=${this.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),w=JSON.parse(R);if(w.items.length===0)throw new Error(`Video (${e}) cannot be fetched from API`);let m=w.items[0],p=await(0,xe.request)({method:"GET",url:`https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails,statistics&id=${m.snippet.channelId}&key=${this.settings.youtubeApiKey}`,headers:{Accept:"application/json"}}),o=JSON.parse(p);if(o.items.length===0)throw new Error(`Channel (${m.snippet.channelId}) cannot be fetched from API`);let s=o.items[0],h=(0,xt.parse)(m.contentDetails.duration),c=Object.prototype.hasOwnProperty.call(m,"tags")?m.snippet.tags.map(L=>L.replace(/[\s:\-_.]/g,"").replace(/^/,"#")):[];return{date:this.getFormattedDateForContent(n),videoId:m.id,videoURL:e,videoTitle:m.snippet.title,videoDescription:m.snippet.description,videoThumbnail:(D=(O=(f=(l=(a=m.snippet.thumbnails)==null?void 0:a.maxres)==null?void 0:l.url)!=null?f:(g=(d=m.snippet.thumbnails)==null?void 0:d.medium)==null?void 0:g.url)!=null?O:(_=(y=m.snippet.thumbnails)==null?void 0:y.default)==null?void 0:_.url)!=null?D:"",videoPlayer:this.getEmbedPlayer(m.id),videoDuration:(0,xt.toSeconds)(h),videoDurationFormatted:this.formatDuration(h),videoPublishDate:(0,xe.moment)(m.snippet.publishedAt).format(this.settings.dateContentFmt),videoViewsCount:m.statistics.viewCount,videoTags:c.join(" "),channelId:s.id,channelURL:`https://www.youtube.com/channel/${s.id}`,channelName:(I=s.snippet.title)!=null?I:"",extra:{thumbnails:m.snippet.thumbnails,publishedAt:(0,xe.moment)(m.snippet.publishedAt).toDate(),tags:c,channel:{thumbnails:s.snippet.thumbnails}}}}catch(R){Dt(R)}}async parseSchema(e,n){var r,a,l,d,g,f,y,_,O,D,I,R,w,m;try{let p=await(0,xe.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36"}}),o=new DOMParser().parseFromString(p,"text/html"),s=o.querySelector('[itemtype*="http://schema.org/VideoObject"]');if(s===null)throw new Error("Unable to find Schema.org element in HTML.");let h=(a=(r=s==null?void 0:s.querySelector('[itemprop="identifier"]'))==null?void 0:r.getAttribute("content"))!=null?a:"",c=s.querySelector('[itemtype="http://schema.org/Person"]');return{date:this.getFormattedDateForContent(n),videoId:h,videoURL:e,videoTitle:(d=(l=s==null?void 0:s.querySelector('[itemprop="name"]'))==null?void 0:l.getAttribute("content"))!=null?d:"",videoDescription:(f=(g=s==null?void 0:s.querySelector('[itemprop="description"]'))==null?void 0:g.getAttribute("content"))!=null?f:"",videoThumbnail:(_=(y=o.querySelector('meta[property="og:image"]'))==null?void 0:y.getAttribute("content"))!=null?_:"",videoPlayer:this.getEmbedPlayer(h),videoDuration:0,videoDurationFormatted:"",videoPublishDate:"",videoViewsCount:0,videoTags:"",channelId:(D=(O=s==null?void 0:s.querySelector('[itemprop="channelId"'))==null?void 0:O.getAttribute("content"))!=null?D:"",channelURL:(R=(I=c==null?void 0:c.querySelector('[itemprop="url"]'))==null?void 0:I.getAttribute("href"))!=null?R:"",channelName:(m=(w=c==null?void 0:c.querySelector('[itemprop="name"]'))==null?void 0:w.getAttribute("content"))!=null?m:"",extra:null}}catch(p){Dt(p)}}formatDuration(e){let n="";return e.years>0&&(n=n.concat(" ",`${e.years}y`)),e.months>0&&(n=n.concat(" ",`${e.months}m`)),e.weeks>0&&(n=n.concat(" ",`${e.weeks}w`)),e.days>0&&(n=n.concat(" ",`${e.days}d`)),e.hours>0&&(n=n.concat(" ",`${e.hours}h`)),e.minutes>0&&(n=n.concat(" ",`${e.minutes}m`)),e.seconds>0&&(n=n.concat(" ",`${e.seconds}s`)),n.trim()}getEmbedPlayer(e){let n=this.settings.youtubeUsePrivacyEnhancedEmbed?"youtube-nocookie.com":"youtube.com";return`<iframe width="${this.settings.youtubeEmbedWidth}" height="${this.settings.youtubeEmbedHeight}" src="https://www.${n}/embed/${e}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`}},bn=li;var Tn=require("obsidian");var ci=class extends W{constructor(e,n,r){super(e,n,r);k(this,"PATTERN",/(vimeo.com)\/(\d+)?/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new Date,r=await this.parseSchema(e,n),a=this.templateEngine.render(this.settings.vimeoNote,r),l=this.templateEngine.render(this.settings.vimeoNoteTitle,{title:r.videoTitle,date:this.getFormattedDateForFilename(n)});return new B(l,"md",a,this.settings.vimeoContentTypeSlug,n)}async parseSchema(e,n){var y,_,O,D,I,R;let r=await(0,Tn.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),l=new DOMParser().parseFromString(r,"text/html").querySelector('script[type="application/ld+json"]'),g=JSON.parse(l.textContent)[0],f=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(n),videoId:f.length===3?f[2]:"",videoURL:(y=g==null?void 0:g.url)!=null?y:"",videoTitle:(_=g==null?void 0:g.name)!=null?_:"",videoPlayer:`<iframe width="${this.settings.vimeoEmbedWidth}" height="${this.settings.vimeoEmbedHeight}" src="${g==null?void 0:g.embedUrl}" title="Vimeo video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,channelName:(D=(O=g==null?void 0:g.author)==null?void 0:O.name)!=null?D:"",channelURL:(R=(I=g==null?void 0:g.author)==null?void 0:I.url)!=null?R:""}}},vn=ci;var Nn=require("obsidian");var ui=class extends W{constructor(e,n,r){super(e,n,r);k(this,"PATTERN",/(bilibili.com)\/(video)?\/([a-z0-9]+)?/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new Date,r=await this.getNoteData(e,n),a=this.templateEngine.render(this.settings.bilibiliNote,r),l=this.templateEngine.render(this.settings.bilibiliNoteTitle,{title:r.videoTitle,date:this.getFormattedDateForFilename(n)});return new B(l,"md",a,this.settings.bilibiliContentTypeSlug,n)}async getNoteData(e,n){var d,g;let r=await(0,Nn.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36"}}),a=new DOMParser().parseFromString(r,"text/html"),l=(d=this.PATTERN.exec(e)[3])!=null?d:"";return{date:this.getFormattedDateForContent(n),videoId:l,videoTitle:(g=a.querySelector("[property~='og:title']").getAttribute("content"))!=null?g:"",videoURL:e,videoPlayer:`<iframe width="${this.settings.bilibiliEmbedWidth}" height="${this.settings.bilibiliEmbedHeight}" src="https://player.bilibili.com/player.html?autoplay=0&bvid=${l}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>`}}},En=ui;var Pt=require("obsidian");function Xr(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])}return i}function mi(i,t){return Array(t+1).join(i)}function Kr(i){return i.replace(/^\n*/,"")}function Jr(i){for(var t=i.length;t>0&&i[t-1]===`
`;)t--;return i.substring(0,t)}var Zr=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function fi(i){return di(i,Zr)}var _n=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Sn(i){return di(i,_n)}function Qr(i){return Rn(i,_n)}var Dn=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function ea(i){return di(i,Dn)}function ta(i){return Rn(i,Dn)}function di(i,t){return t.indexOf(i.nodeName)>=0}function Rn(i,t){return i.getElementsByTagName&&t.some(function(e){return i.getElementsByTagName(e).length})}var Q={};Q.paragraph={filter:"p",replacement:function(i){return`

`+i+`

`}};Q.lineBreak={filter:"br",replacement:function(i,t,e){return e.br+`
`}};Q.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(i,t,e){var n=Number(t.nodeName.charAt(1));if(e.headingStyle==="setext"&&n<3){var r=mi(n===1?"=":"-",i.length);return`

`+i+`
`+r+`

`}else return`

`+mi("#",n)+" "+i+`

`}};Q.blockquote={filter:"blockquote",replacement:function(i){return i=i.replace(/^\n+|\n+$/g,""),i=i.replace(/^/gm,"> "),`

`+i+`

`}};Q.list={filter:["ul","ol"],replacement:function(i,t){var e=t.parentNode;return e.nodeName==="LI"&&e.lastElementChild===t?`
`+i:`

`+i+`

`}};Q.listItem={filter:"li",replacement:function(i,t,e){i=i.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var n=e.bulletListMarker+"   ",r=t.parentNode;if(r.nodeName==="OL"){var a=r.getAttribute("start"),l=Array.prototype.indexOf.call(r.children,t);n=(a?Number(a)+l:l+1)+".  "}return n+i+(t.nextSibling&&!/\n$/.test(i)?`
`:"")}};Q.indentedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="indented"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Q.fencedCodeBlock={filter:function(i,t){return t.codeBlockStyle==="fenced"&&i.nodeName==="PRE"&&i.firstChild&&i.firstChild.nodeName==="CODE"},replacement:function(i,t,e){for(var n=t.firstChild.getAttribute("class")||"",r=(n.match(/language-(\S+)/)||[null,""])[1],a=t.firstChild.textContent,l=e.fence.charAt(0),d=3,g=new RegExp("^"+l+"{3,}","gm"),f;f=g.exec(a);)f[0].length>=d&&(d=f[0].length+1);var y=mi(l,d);return`

`+y+r+`
`+a.replace(/\n$/,"")+`
`+y+`

`}};Q.horizontalRule={filter:"hr",replacement:function(i,t,e){return`

`+e.hr+`

`}};Q.inlineLink={filter:function(i,t){return t.linkStyle==="inlined"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t){var e=t.getAttribute("href");e&&(e=e.replace(/([()])/g,"\\$1"));var n=Ct(t.getAttribute("title"));return n&&(n=' "'+n.replace(/"/g,'\\"')+'"'),"["+i+"]("+e+n+")"}};Q.referenceLink={filter:function(i,t){return t.linkStyle==="referenced"&&i.nodeName==="A"&&i.getAttribute("href")},replacement:function(i,t,e){var n=t.getAttribute("href"),r=Ct(t.getAttribute("title"));r&&(r=' "'+r+'"');var a,l;switch(e.linkReferenceStyle){case"collapsed":a="["+i+"][]",l="["+i+"]: "+n+r;break;case"shortcut":a="["+i+"]",l="["+i+"]: "+n+r;break;default:var d=this.references.length+1;a="["+i+"]["+d+"]",l="["+d+"]: "+n+r}return this.references.push(l),a},references:[],append:function(i){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Q.emphasis={filter:["em","i"],replacement:function(i,t,e){return i.trim()?e.emDelimiter+i+e.emDelimiter:""}};Q.strong={filter:["strong","b"],replacement:function(i,t,e){return i.trim()?e.strongDelimiter+i+e.strongDelimiter:""}};Q.code={filter:function(i){var t=i.previousSibling||i.nextSibling,e=i.parentNode.nodeName==="PRE"&&!t;return i.nodeName==="CODE"&&!e},replacement:function(i){if(!i)return"";i=i.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(i)?" ":"",e="`",n=i.match(/`+/gm)||[];n.indexOf(e)!==-1;)e=e+"`";return e+t+i+t+e}};Q.image={filter:"img",replacement:function(i,t){var e=Ct(t.getAttribute("alt")),n=t.getAttribute("src")||"",r=Ct(t.getAttribute("title")),a=r?' "'+r+'"':"";return n?"!["+e+"]("+n+a+")":""}};function Ct(i){return i?i.replace(/(\n+\s*)+/g,`
`):""}function xn(i){this.options=i,this._keep=[],this._remove=[],this.blankRule={replacement:i.blankReplacement},this.keepReplacement=i.keepReplacement,this.defaultRule={replacement:i.defaultReplacement},this.array=[];for(var t in i.rules)this.array.push(i.rules[t])}xn.prototype={add:function(i,t){this.array.unshift(t)},keep:function(i){this._keep.unshift({filter:i,replacement:this.keepReplacement})},remove:function(i){this._remove.unshift({filter:i,replacement:function(){return""}})},forNode:function(i){if(i.isBlank)return this.blankRule;var t;return(t=hi(this.array,i,this.options))||(t=hi(this._keep,i,this.options))||(t=hi(this._remove,i,this.options))?t:this.defaultRule},forEach:function(i){for(var t=0;t<this.array.length;t++)i(this.array[t],t)}};function hi(i,t,e){for(var n=0;n<i.length;n++){var r=i[n];if(ia(r,t,e))return r}}function ia(i,t,e){var n=i.filter;if(typeof n=="string"){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(i,t,e))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function na(i){var t=i.element,e=i.isBlock,n=i.isVoid,r=i.isPre||function(_){return _.nodeName==="PRE"};if(!(!t.firstChild||r(t))){for(var a=null,l=!1,d=null,g=An(d,t,r);g!==t;){if(g.nodeType===3||g.nodeType===4){var f=g.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!l&&f[0]===" "&&(f=f.substr(1)),!f){g=pi(g);continue}g.data=f,a=g}else if(g.nodeType===1)e(g)||g.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,l=!1):n(g)||r(g)?(a=null,l=!0):a&&(l=!1);else{g=pi(g);continue}var y=An(d,g,r);d=g,g=y}a&&(a.data=a.data.replace(/ $/,""),a.data||pi(a))}}function pi(i){var t=i.nextSibling||i.parentNode;return i.parentNode.removeChild(i),t}function An(i,t,e){return i&&i.parentNode===t||e(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var yi=typeof window!="undefined"?window:{};function ra(){var i=yi.DOMParser,t=!1;try{new i().parseFromString("","text/html")&&(t=!0)}catch(e){}return t}function aa(){var i=function(){};return sa()?i.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:i.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},i}function sa(){var i=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){yi.ActiveXObject&&(i=!0)}return i}var oa=ra()?yi.DOMParser:aa();function la(i,t){var e;if(typeof i=="string"){var n=ca().parseFromString('<x-turndown id="turndown-root">'+i+"</x-turndown>","text/html");e=n.getElementById("turndown-root")}else e=i.cloneNode(!0);return na({element:e,isBlock:fi,isVoid:Sn,isPre:t.preformattedCode?ua:null}),e}var gi;function ca(){return gi=gi||new oa,gi}function ua(i){return i.nodeName==="PRE"||i.nodeName==="CODE"}function ha(i,t){return i.isBlock=fi(i),i.isCode=i.nodeName==="CODE"||i.parentNode.isCode,i.isBlank=pa(i),i.flankingWhitespace=ga(i,t),i}function pa(i){return!Sn(i)&&!ea(i)&&/^\s*$/i.test(i.textContent)&&!Qr(i)&&!ta(i)}function ga(i,t){if(i.isBlock||t.preformattedCode&&i.isCode)return{leading:"",trailing:""};var e=ma(i.textContent);return e.leadingAscii&&wn("left",i,t)&&(e.leading=e.leadingNonAscii),e.trailingAscii&&wn("right",i,t)&&(e.trailing=e.trailingNonAscii),{leading:e.leading,trailing:e.trailing}}function ma(i){var t=i.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function wn(i,t,e){var n,r,a;return i==="left"?(n=t.previousSibling,r=/ $/):(n=t.nextSibling,r=/^ /),n&&(n.nodeType===3?a=r.test(n.nodeValue):e.preformattedCode&&n.nodeName==="CODE"?a=!1:n.nodeType===1&&!fi(n)&&(a=r.test(n.textContent))),a}var fa=Array.prototype.reduce,da=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Lt(i){if(!(this instanceof Lt))return new Lt(i);var t={rules:Q,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,n){return n.isBlock?`

`:""},keepReplacement:function(e,n){return n.isBlock?`

`+n.outerHTML+`

`:n.outerHTML},defaultReplacement:function(e,n){return n.isBlock?`

`+e+`

`:e}};this.options=Xr({},t,i),this.rules=new xn(this.options)}Lt.prototype={turndown:function(i){if(!Ta(i))throw new TypeError(i+" is not a string, or an element/document/fragment node.");if(i==="")return"";var t=Cn.call(this,new la(i,this.options));return ya.call(this,t)},use:function(i){if(Array.isArray(i))for(var t=0;t<i.length;t++)this.use(i[t]);else if(typeof i=="function")i(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(i,t){return this.rules.add(i,t),this},keep:function(i){return this.rules.keep(i),this},remove:function(i){return this.rules.remove(i),this},escape:function(i){return da.reduce(function(t,e){return t.replace(e[0],e[1])},i)}};function Cn(i){var t=this;return fa.call(i.childNodes,function(e,n){n=new ha(n,t.options);var r="";return n.nodeType===3?r=n.isCode?n.nodeValue:t.escape(n.nodeValue):n.nodeType===1&&(r=ba.call(t,n)),Ln(e,r)},"")}function ya(i){var t=this;return this.rules.forEach(function(e){typeof e.append=="function"&&(i=Ln(i,e.append(t.options)))}),i.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function ba(i){var t=this.rules.forNode(i),e=Cn.call(this,i),n=i.flankingWhitespace;return(n.leading||n.trailing)&&(e=e.trim()),n.leading+t.replacement(e,i,this.options)+n.trailing}function Ln(i,t){var e=Jr(i),n=Kr(t),r=Math.max(i.length-e.length,t.length-n.length),a=`

`.substring(0,r);return e+a+n}function Ta(i){return i!=null&&(typeof i=="string"||i.nodeType&&(i.nodeType===1||i.nodeType===9||i.nodeType===11))}var Pn=Lt;var In=/highlight-(?:text|source)-([a-z0-9]+)/;function va(i){i.addRule("highlightedCodeBlock",{filter:function(t){var e=t.firstChild;return t.nodeName==="DIV"&&In.test(t.className)&&e&&e.nodeName==="PRE"},replacement:function(t,e,n){var r=e.className||"",a=(r.match(In)||[null,""])[1];return`

`+n.fence+a+`
`+e.firstChild.textContent+`
`+n.fence+`

`}})}function Na(i){i.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var Ea=Array.prototype.indexOf,Ce={};Ce.tableCell={filter:["th","td"],replacement:function(i,t){return kn(i,t)+Mn(t,"")}};Ce.tableRow={filter:"tr",replacement:function(i,t){var e="",n={left:":--",right:"--:",center:":-:"};if(Aa(t))for(var r=0;r<t.childNodes.length;r++){var a="---",l=(t.childNodes[r].getAttribute("align")||"").toLowerCase();l&&(a=n[l]||a),e+=kn(a,t.childNodes[r])+Mn(t.childNodes[r],a)}return`
`+i+(e?`
`+e:"")}};Ce.table={filter:function(i){return i.nodeName==="TABLE"&&!On(i)},replacement:function(i){return i=i.replace(`

`,`
`),`

`+i+`

`}};Ce.tableSection={filter:["thead","tbody","tfoot"],replacement:function(i){return i}};Ce.captionSection={filter:"caption",replacement:function(i,t){return t.parentNode.nodeName==="TABLE"&&t.parentNode.childNodes[0]===t?i:""}};function Aa(i){var t=i.parentNode,e=t;return(t.nodeName==="THEAD"||t.nodeName==="TFOOT"||t.nodeName==="TBODY")&&(e=t.parentNode),e.nodeName==="TABLE"&&e.rows[0]===i}function kn(i,t){var e=Ea.call(t.parentNode.childNodes,t),n=" ";return e===0&&(n="| "),i=i.replace(/\r\n/g,`
`).replace(/\n/g," "),i=i.replace(/\|/g,"\\|"),n+i+" |"}function Mn(i,t){var e=i.getAttribute("colspan")||1;return e<=1?"":(" "+t+" |").repeat(e-1)}function On(i){for(var t=i.parentNode;t;){if(t.nodeName==="TABLE")return!0;t=t.parentNode}return!1}function wa(i){i.keep(function(e){return e.nodeName==="TABLE"&&On(e)});for(var t in Ce)i.addRule(t,Ce[t])}function _a(i){i.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}})}function Fn(i){i.use([va,Na,wa,_a])}async function Te(i){let t=Fn,e=new Pn({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});return e.use(t),e.addRule("fencedCodeLangBlock",{filter:r=>r.nodeName=="PRE"&&(!r.firstChild||r.firstChild.nodeName!="CODE")&&!r.querySelector("img"),replacement:function(r,a,l){var R;a.innerHTML=a.innerHTML.replaceAll("<br-keep></br-keep>","<br>");let d=(R=a.id)==null?void 0:R.match(/code-lang-(.+)/),g=(d==null?void 0:d.length)>0?d[1]:"",f=a.textContent,y=l.fence.charAt(0),_=3,O=new RegExp("^"+y+"{3,}","gm"),D;for(;D=O.exec(f);)D[0].length>=_&&(_=D[0].length+1);let I=Array(_+1).join(y);return`

`+I+g+`
`+f.replace(/\n$/,"")+`
`+I+`

`}}),e.turndown(i)}var bi=class extends W{constructor(e,n,r){super(e,n,r);k(this,"PATTERN",/(https:\/\/(twitter|x).com\/([a-zA-Z0-9_]+\/)([a-zA-Z0-9_]+\/[a-zA-Z0-9_]+))/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new Date,r=new URL(e);r.hostname==="x.com"&&(r.hostname="twitter.com");let a=await this.getTweetNoteData(r,n),l=this.templateEngine.render(this.settings.twitterNote,a),d=this.templateEngine.render(this.settings.twitterNoteTitle,{tweetAuthorName:a.tweetAuthorName,date:this.getFormattedDateForFilename(n)});return new B(d,"md",l,this.settings.twitterContentTypeSlug,n)}async getTweetNoteData(e,n){let r=JSON.parse(await(0,Pt.request)({method:"GET",contentType:"application/json",url:`https://publish.twitter.com/oembed?url=${e.href}`})),a=await Te(r.html);return{date:this.getFormattedDateForContent(n),tweetAuthorName:r.author_name,tweetURL:r.url,tweetContent:a,tweetPublishDate:this.getPublishedDateFromDOM(r.html)}}getPublishedDateFromDOM(e){let r=new DOMParser().parseFromString(e,"text/html").querySelector("blockquote > a"),a=(0,Pt.moment)(r.textContent);return a.isValid()?a.format(this.settings.dateContentFmt):""}},Un=bi;var It=require("obsidian"),Ai=We(Ei());var wi=class extends W{constructor(e,n,r){super(e,n,r);k(this,"PATTERN",/(https:\/\/|http:\/\/)(stackoverflow\.com|serverfault\.com|superuser\.com|askubuntu\.com|stackapps\.com|.*\.stackexchange\.com)\/(q|a|questions)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new Date,r=await(0,It.request)({method:"GET",url:e}),a=new DOMParser().parseFromString(r,"text/html"),l=await this.parseDocument(a),d=this.templateEngine.render(this.settings.stackExchangeNoteTitle,{title:l.title,date:this.getFormattedDateForFilename(n)}),g;this.settings.downloadStackExchangeAssetsInDir?(g=this.templateEngine.render(this.settings.assetsDir,{date:"",fileName:"",contentType:""}),g=`${g}/${re(d)}`):g=this.templateEngine.render(this.settings.assetsDir,{date:this.getFormattedDateForFilename(n),fileName:re(d),contentType:this.settings.stackExchangeContentType});let f=this.templateEngine.render(this.settings.stackExchangeNote,this.getNoteData(l,n));return this.settings.downloadStackExchangeAssets&&It.Platform.isDesktop&&(f=await Re(this.app,f,g)),new B(d,"md",f,this.settings.stackExchangeContentType,n)}getNoteData(e,n){let r=e.topAnswer?this.templateEngine.render(this.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(n),answerContent:e.topAnswer.content,authorName:e.topAnswer.author.name,authorProfileURL:e.topAnswer.author.profile}):"",a="";for(let l=0;l<e.answers.length;l++)a=a.concat(`

***

`,this.templateEngine.render(this.settings.stackExchangeAnswer,{date:this.getFormattedDateForContent(n),answerContent:e.answers[l].content,authorName:e.answers[l].author.name,authorProfileURL:e.answers[l].author.profile}));return{date:this.getFormattedDateForContent(n),questionTitle:e.title,questionURL:e.url,questionContent:e.content,authorName:e.author.name,authorProfileURL:e.author.profile,topAnswer:r,answers:a.trim(),extra:{question:e}}}async parseDocument(e){var l,d,g,f,y,_,O,D,I,R,w,m,p,o,s,h;let n;try{n=new URL((g=(l=e.querySelector('link[rel="canonical"]'))==null?void 0:l.getAttribute("href"))!=null?g:(d=e.querySelector('meta[property="og:url"]'))==null?void 0:d.getAttribute("content"))}catch(c){n=null}let r=e.querySelector('#question [itemprop="author"]'),a=[];for(let c of e.querySelectorAll(".answer")){let L=c.querySelector('[itemprop="author"]');a.push({content:await Te(Ai.sanitize((f=c.querySelector('[itemprop="text"]'))!=null?f:"")),author:{name:(_=(y=L==null?void 0:L.querySelector('[itemprop="name"]'))==null?void 0:y.textContent)!=null?_:"",profile:L instanceof Element&&n instanceof URL?String.prototype.concat(n.origin,(D=(O=L.querySelector("a"))==null?void 0:O.getAttribute("href"))!=null?D:""):""}})}return{title:(R=(I=e.querySelector('#question-header [itemprop="name"]'))==null?void 0:I.textContent)!=null?R:"",content:await Te(Ai.sanitize((w=e.querySelector('#question [itemprop="text"]'))!=null?w:"")),url:(m=n==null?void 0:n.href)!=null?m:"",topAnswer:a.slice(0,1).shift(),answers:a.slice(1),author:{name:(o=(p=r==null?void 0:r.querySelector('[itemprop="name"]'))==null?void 0:p.textContent)!=null?o:"",profile:r instanceof Element&&n instanceof URL?String.prototype.concat(n.origin,(h=(s=r.querySelector("a"))==null?void 0:s.getAttribute("href"))!=null?h:""):""}}}},Hn=wi;var Le=require("obsidian"),kt=We(jn()),qn=We(Ei());var Di=class extends W{constructor(t,e,n){super(t,e,n)}test(t){return this.isValidUrl(t)}async prepareNote(t){let e=new URL(t),n=await this.getDocument(e);return this.makeNote(n,e)}async makeNote(t,e){(0,kt.isProbablyReaderable)(t)||new Le.Notice("@mozilla/readability considers this document to unlikely be readerable.");let n=new Date,r=this.extractPreviewUrl(t),a=new kt.Readability(t).parse();if(a===null||!Object.prototype.hasOwnProperty.call(a,"content"))return this.notParsableArticle(e.href,r,n);let l=await Te(a.content);return this.parsableArticle({date:this.getFormattedDateForContent(n),articleTitle:a.title||"No title",articleURL:e.href,articleReadingTime:this.getEstimatedReadingTime(a),articleContent:l,siteName:a.siteName||"",author:a.byline||"",previewURL:r||"",publishedTime:a.publishedTime!==null?this.getFormattedDateForContent(a.publishedTime):"",readabilityArticle:a},n)}async getDocument(t){var g,f,y,_,O;let e=await(0,Le.request)({method:"GET",url:t.href}),n=new DOMParser().parseFromString(e,"text/html"),r=n.getElementsByTagName("base"),a=null;r.length>0&&(a=r.item(0).getAttribute("href"),Array.from(r).forEach(D=>{D.remove()}));let l=n.createElement("base");l.setAttribute("href",ri(a!=null?a:t.href,t.origin)),n.head.append(l);let d=qn.sanitize(n.body.innerHTML);return n.body.innerHTML=d,(g=n.body.querySelectorAll("pre br"))==null||g.forEach(D=>{D.outerHTML="<br-keep></br-keep>"}),(f=n.body.querySelectorAll("h1, h2, h3, h4, h5, h6"))==null||f.forEach(D=>{D.className=""}),(y=n.body.querySelectorAll("[class*=highlight-text],[class*=highlight-source]"))==null||y.forEach(D=>{var R;let I=(R=D.className.match(/highlight-(?:text|source)-([a-z0-9]+)/))==null?void 0:R[1];D.firstElementChild.nodeName=="PRE"&&(D.removeAttribute("data-snippet-clipboard-copy-content"),D.firstElementChild.id=`code-lang-${I}`)}),(_=n.body.querySelectorAll("[class*=language-]"))==null||_.forEach(D=>{var R;let I=(R=D.className.match(/language-([a-z0-9]+)/))==null?void 0:R[1];D.id=`code-lang-${I}`}),(O=n.body.querySelectorAll(".codehilite > pre"))==null||O.forEach(D=>{D.firstChild.nodeName!=="CODE"&&!D.className.includes("language")&&(D.id="code-lang-text")}),n}async parsableArticle(t,e){let n=this.templateEngine.render(this.settings.parseableArticleNoteTitle,{title:t.articleTitle,date:this.getFormattedDateForFilename(e)}),r=this.templateEngine.render(this.settings.parsableArticleNote,t);return this.settings.downloadImages&&Le.Platform.isDesktop&&(r=await this.replaceImages(n,r,e)),new B(n,"md",r,this.settings.parseableArticleContentType,e)}async notParsableArticle(t,e,n){console.error("Website not parseable");let r=this.settings.notParsableArticleNote.replace(/%articleURL%/g,()=>t).replace(/%previewURL%/g,()=>e||""),a=this.settings.notParseableArticleNoteTitle.replace(/%date%/g,this.getFormattedDateForFilename(n));return this.settings.downloadImages&&Le.Platform.isDesktop&&(r=await this.replaceImages(a,r,n)),new B(a,"md",r,this.settings.notParseableArticleContentType,n)}extractPreviewUrl(t){let e=t.querySelector('meta[property="og:image"]');return e==null&&(e=t.querySelector('meta[name="twitter:image"]')),e==null?void 0:e.getAttribute("content")}async replaceImages(t,e,n){let r;return this.settings.downloadImagesInArticleDir?(r=this.templateEngine.render(this.settings.assetsDir,{date:"",fileName:"",contentType:""}),r=`${r}/${re(t)}`):r=this.templateEngine.render(this.settings.assetsDir,{date:this.getFormattedDateForFilename(n),fileName:re(t),contentType:this.settings.parseableArticleContentType}),Re(this.app,e,r)}getEstimatedReadingTime(t){let e=this.getReadingSpeed(t.lang||"en"),n=t.textContent.trim().split(/\s+/).length;return Math.ceil(n/e)}getReadingSpeed(t){let e=new Map([["en",228],["ar",138],["de",179],["es",218],["fi",161],["fr",195],["he",187],["it",188],["ja",193],["nl",202],["pl",166],["pt",181],["ru",184],["sk",190],["sl",180],["sv",199],["tr",166],["zh",158]]);return e.get(t)||e.get("en")}},je=Di;var Ri=class extends W{constructor(t,e,n){super(t,e,n)}test(){return!0}async prepareNote(t){let e=new Date,n=this.templateEngine.render(this.settings.textSnippetNoteTitle,{date:this.getFormattedDateForFilename(e)}),r=this.templateEngine.render(this.settings.textSnippetNote,{content:t,date:this.getFormattedDateForContent(e)});return new B(n,"md",r,this.settings.textSnippetContentType,e)}},Yn=Ri;var qe=require("obsidian");var xi={INSTANCE:"/api/v2/instance",OEMBED:"/api/oembed",STATUS:"/api/v1/statuses",CONTEXT:"/api/v1/statuses/%id%/context"},Ci=class extends W{constructor(t,e,n){super(t,e,n)}async test(t){return ge(t)&&await this.testIsMastodon(t)}async prepareNote(t){let e=new Date,n=new URL(t),r=n.pathname.split("/")[2],a=await this.loadStatus(n.hostname,r),l=[];this.settings.saveMastodonReplies&&(l=await this.loadReplies(n.hostname,r));let d=this.templateEngine.render(this.settings.mastodonNoteTitle,{tootAuthorName:a.account.display_name,date:this.getFormattedDateForFilename(e)}),g;this.settings.downloadMastodonMediaAttachmentsInDir?(g=this.templateEngine.render(this.settings.assetsDir,{date:"",fileName:"",contentType:""}),g=`${g}/${re(d)}`):g=this.templateEngine.render(this.settings.assetsDir,{date:this.getFormattedDateForFilename(e),fileName:re(d),contentType:this.settings.mastodonContentTypeSlug});let f=await this.getNoteData(a,l,g,e),y=this.templateEngine.render(this.settings.mastodonNote,f);return new B(d,"md",y,this.settings.mastodonContentTypeSlug,e)}async getNoteData(t,e,n,r){let a=await this.parseStatus(t,n);if(e.length>0)for(let l=0;l<e.length;l++){let d=await this.parseStatus(e[l],n),g=this.templateEngine.render(this.settings.mastodonReply,{tootAuthorName:e[l].account.display_name,tootURL:e[l].url,tootContent:d});a=a.concat(`

***

`,g)}return{date:this.getFormattedDateForContent(r),tootAuthorName:t.account.display_name,tootURL:t.url,tootContent:a,extra:{status:t,replies:e}}}async loadStatus(t,e){return JSON.parse(await(0,qe.request)({method:"GET",contentType:"application/json",url:`https://${t}${xi.STATUS}/${e}`}))}async loadReplies(t,e){let n=String.prototype.concat.call("https://",t,String.prototype.replace.call(xi.CONTEXT,"%id%",e));return JSON.parse(await(0,qe.request)({method:"GET",contentType:"application/json",url:n})).descendants}async parseStatus(t,e){let n=await Te(t.content),r=this.settings.downloadMastodonMediaAttachments&&qe.Platform.isDesktop?await Re(this.app,this.prepareMedia(t.media_attachments),e):this.prepareMedia(t.media_attachments);return n.concat(r)}prepareMedia(t){return t.reduce((e,{url:n,description:r})=>{let a=r?`
> *${r}*`:"";return`${e}

![](${n})${a}`},"")}async testIsMastodon(t){if(!t)return!1;let e=new URL(t).hostname;try{let n=JSON.parse(await(0,qe.request)({method:"GET",contentType:"application/json",url:`https://${e}${xi.INSTANCE}`}));return(n==null?void 0:n.domain)===e}catch(n){return!1}}},Xn=Ci;var Kn=require("obsidian");var Li=class extends W{constructor(e,n,r){super(e,n,r);k(this,"PATTERN",/(tiktok.com)\/(\S+)\/(video)\/(\d+)/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new Date,r=await this.parseHtml(e,n),a=this.templateEngine.render(this.settings.tikTokNote,r),l=this.templateEngine.render(this.settings.tikTokNoteTitle,{authorName:r.authorName,date:this.getFormattedDateForFilename(n)});return new B(l,"md",a,this.settings.tikTokContentTypeSlug,n)}async parseHtml(e,n){var d,g,f,y;let r=await(0,Kn.request)({method:"GET",url:e,headers:{"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"}}),a=new DOMParser().parseFromString(r,"text/html"),l=this.PATTERN.exec(e);return{date:this.getFormattedDateForContent(n),videoId:l[4],videoURL:(g=(d=a.querySelector('meta[property="og:url"]'))==null?void 0:d.getAttribute("content"))!=null?g:e,videoDescription:(y=(f=a.querySelector('meta[property="og:description"]'))==null?void 0:f.getAttribute("content"))!=null?y:"",videoPlayer:`<iframe width="${this.settings.tikTokEmbedWidth}" height="${this.settings.tikTokEmbedHeight}" src="https://www.tiktok.com/embed/v2/${l[4]}"></iframe>`,authorName:l[2],authorURL:`https://www.tiktok.com/${l[2]}`}}},Jn=Li;var ot=class{constructor(t){k(this,"parsers");this.parsers=t}async createParser(t){for(let e of this.parsers)if(await e.test(t))return e}};var lt=class extends je{constructor(){super(...arguments);k(this,"PATTERN",/^https?:\/\/(?:www\.)?github\.com\/([a-zA-Z0-9_-]+)\/([a-zA-Z0-9_-]+)\/?$/)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new URL(e),r=await this.getDocument(n),a=r.querySelector("article.markdown-body");return a.querySelectorAll('[aria-label^="Permalink:"]').forEach(l=>l.remove()),r.querySelector("body").innerHTML=a.outerHTML,this.makeNote(r,n)}};var ct=class extends je{constructor(){super(...arguments);k(this,"PATTERN",/^(?:https?:\/\/)?(?:[a-z]{2,3}(?:-[a-z]{2,3})?)\.wikipedia\.org\/wiki\/([^/]+)$/i)}test(e){return this.isValidUrl(e)&&this.PATTERN.test(e)}async prepareNote(e){let n=new URL(e),r=await this.getDocument(n);return r.querySelectorAll(".reference .cite-bracket").forEach(a=>{a.remove()}),r.querySelectorAll(".reference a").forEach(a=>{a.textContent="\xA0"+a.textContent}),r.querySelectorAll(".mw-cite-backlink").forEach(a=>{a.remove()}),r.querySelectorAll(".infobox caption").forEach(a=>{let l=r.createElement("p");l.innerHTML=a.innerHTML,a.parentElement.insertBefore(l,a),a.remove()}),r.querySelectorAll(".wikitable caption").forEach(a=>{let l=r.createElement("p");l.innerHTML=a.innerHTML,a.parentElement.insertBefore(l,a),a.remove()}),this.makeNote(r,n)}};var Ye=["string","number","bigint","symbol"],La=/{{(.*?)}}/g,ut=class{constructor(){k(this,"modifiers");this.modifiers={blockquote:t=>this.validateFilterValueType(t,"blockquote",Ye)?t.split(`
`).map(e=>`> ${e}`).join(`
`):t,capitalize:t=>{if(!this.validateFilterValueType(t,"capitalize",Ye))return t;let e=String(t);return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},join:(t,e=",")=>this.validateFilterValueType(t,"join",["array"])?t.join(e):t,lower:t=>{if(!this.validateFilterValueType(t,"lower",Ye))return t;String(t).toLowerCase()},map:(t,e)=>{if(!this.validateFilterValueType(t,"map",["array"]))return t;try{return t.map(e)}catch(n){return console.warn("Error in map modifier:",n),t}},replace:(t,e,n="")=>this.validateFilterValueType(t,"replace",Ye)?t.replaceAll(e,n):t,striptags:(t,e="")=>{if(!this.validateFilterValueType(t,"striptags",Ye))return t;let n=new RegExp(`<(?!/?(${e.replace(/[<>]/g,"").split(",").join("|")})s*/?)[^>]+>`,"gi");return t.replace(n,"")},upper:t=>{if(!this.validateFilterValueType(t,"upper",Ye))return t;String(t).toUpperCase()}}}render(t,e){try{let n=this.processLoops(t,e);return n=this.processVariables(n,e),n=this.processSimplePattern(n,e),n}catch(n){return console.error("Error rendering template:",n),t}}processSimplePattern(t,e){let n=/%(\w+(?:\.\w+)*)%/g;return t.replace(n,(r,a)=>{try{let l=this.resolveValue(a,e);return l===void 0?(console.warn(`Unable to resolve ${a}`),r):String(l)}catch(l){return console.warn(`Error processing simple pattern "${r}":`,l),r}})}processVariables(t,e){return t.replace(La,(n,r)=>{try{let[a,...l]=r.split("|").map(_=>_.trim()),g=/(['"])((?:[^\\]|\\.)*?)\1/.exec(a),f;if(g!==null?f=g[2]:f=this.resolveValue(a,e),f===void 0)return console.warn(`Unable to resolve ${a}`),n;let y=f;for(let _ of l)y=this.applyModifier(y,_);return String(y)}catch(a){return console.warn(`Error processing variable "${n}":`,a),n}})}processLoops(t,e){let n=/{%\s*for\s+(\w+)\s+in\s+(\w+(?:\.\w+)*)\s*%}([\s\S]*?){%\s*endfor\s*%}/g;return t.replace(n,(r,a,l,d)=>{try{let g=this.resolveValue(l,e);return Array.isArray(g)?g.map(f=>{let y={...e,[a]:f};return this.render(d,y)}).join(""):(console.warn(`Value at "${l}" is not an array`),"")}catch(g){return console.warn(`Error processing loop "${r}":`,g),""}})}resolveValue(t,e){let n=t.trim().split("."),r=e;for(let a of n){if(r==null)return;r=r[a]}return r}addModifier(t,e){if(typeof e!="function")throw new Error("Modifier must be a function");this.modifiers[t]=e}parseModifier(t){let e=t.match(/(\w+)(?:\((.*?)\))?/);if(!e)return{name:t,args:[]};let[,n,r]=e,a=r?this.parseArguments(r):[];return{name:n,args:a}}parseArguments(t){let e=[],n="",r=!1,a="",l=!1,d=0,g=!1,f=()=>{(n.trim()||r)&&e.push(this.evaluateArgument(n.trim())),n=""};for(let y=0;y<t.length;y++){let _=t[y];if(g){n+=_,g=!1;continue}switch(_){case"\\":g=!0;break;case'"':case"'":l||(r&&_===a?r=!1:r||(r=!0,a=_)),n+=_;break;case"(":d++,n+=_;break;case")":d--,n+=_;break;case"=":t[y+1]===">"?(l=!0,n+="=>",y++):n+=_;break;case",":!r&&!l&&d===0?f():n+=_;break;default:n+=_}}return(n||r)&&f(),e}evaluateArgument(t){try{if(t.includes("=>")){let e=Function(`return ${t}`)();return typeof e=="function"?e:t}if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(t==="")return"";if(!isNaN(Number(t)))return Number(t);if(t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch(e){return t}return t}catch(e){return console.warn("Error evaluating argument:",t,e),t}}applyModifier(t,e){try{let{name:n,args:r}=this.parseModifier(e);return this.modifiers[n]?this.modifiers[n](t,...r):(console.warn(`Modifier "${n}" not found`),t)}catch(n){return console.warn(`Error applying modifier "${e}":`,n),t}}validateFilterValueType(t,e,n){let r=typeof t;return n.includes(r)?!0:n.includes("array")?Array.isArray(t):(console.warn(`Filter ${e} supports following types ${n.join(", ")}, but ${r} was provided.`),!1)}};var Mt=class extends me.Plugin{constructor(){super(...arguments);k(this,"settings");k(this,"parserCreator");k(this,"templateEngine")}async onload(){await this.loadSettings(),this.templateEngine=new ut,this.parserCreator=new ot([new bn(this.app,this.settings,this.templateEngine),new vn(this.app,this.settings,this.templateEngine),new En(this.app,this.settings,this.templateEngine),new Un(this.app,this.settings,this.templateEngine),new Hn(this.app,this.settings,this.templateEngine),new Xn(this.app,this.settings,this.templateEngine),new Jn(this.app,this.settings,this.templateEngine),new lt(this.app,this.settings,this.templateEngine),new ct(this.app,this.settings,this.templateEngine),new je(this.app,this.settings,this.templateEngine),new Yn(this.app,this.settings,this.templateEngine)]),(0,me.addIcon)("read-it-later",Pa),this.addRibbonIcon("read-it-later","ReadItLater: Save clipboard",async()=>{await this.processClipboard()}),this.addCommand({id:"save-clipboard-to-notice",name:"Save clipboard",callback:async()=>{await this.processClipboard()}}),this.addSettingTab(new Rt(this.app,this)),this.settings.extendShareMenu&&this.registerEvent(this.app.workspace.on("receive-text-menu",(e,n)=>{e.addItem(r=>{r.setTitle("ReadItLater"),r.setIcon("read-it-later"),r.onClick(()=>this.processContent(n))})})),this.registerEvent(this.app.workspace.on("url-menu",(e,n)=>{ge(n,[At,wt])&&e.addItem(r=>{r.setTitle("ReadItLater"),r.setIcon("read-it-later"),r.onClick(()=>this.processContent(n))})}))}async loadSettings(){this.settings=Object.assign({},T,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async processClipboard(){let e=await navigator.clipboard.readText();this.settings.batchProcess?this._processUrlsBatch(e):this._processUrlSingle(e)}async _processUrlSingle(e){let r=await(await this.parserCreator.createParser(e)).prepareNote(e);await this.writeFile(r)}async _processUrlsBatch(e){let n=(()=>{let r=e.trim().split(fn(this.settings.batchProcessDelimiter)).filter(l=>l.trim().length>0);return r.reduce((l,d)=>l&&ge(d),!0)?r:[e]})();for(let r of n)this._processUrlSingle(r)}async processContent(e){let r=await(await this.parserCreator.createParser(e)).prepareNote(e);await this.writeFile(r)}async writeFile(e){let n;if(this.settings.inboxDir){let r=this.templateEngine.render(this.settings.inboxDir,{date:Ge(e.createdAt,this.settings.dateTitleFmt),fileName:e.fileName,contentType:e.contentType});await st(this.app.vault,r),n=(0,me.normalizePath)(`${r}/${e.getFullFilename()}`)}else n=(0,me.normalizePath)(`/${e.getFullFilename()}`);if(await this.app.vault.adapter.exists(n))new me.Notice(`${e.getFullFilename()} already exists!`);else{let r=await this.app.vault.create(n,e.content);(this.settings.openNewNote||this.settings.openNewNoteInNewTab)&&this.app.workspace.getLeaf(this.settings.openNewNoteInNewTab?"tab":!1).openFile(r),new me.Notice(`${e.getFullFilename()} created successful`)}}},Pa=`
<svg fill="currentColor" stroke="currentColor" version="1.1" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
	<g>
		<path d="m365.9,144.9c-12.3,0-24.2,1.8-35.4,5.2v-114.7h-96.9l7.3-35.4h-150.2l6.8,35.4h-97.5v454.6h330.5v-102.1c11.2,3.4 23.1,5.2 35.4,5.2 68.8-0.1 124.1-56.4 124.1-124.1 0-67.8-55.3-124.1-124.1-124.1zm-150.1-124l-10.4,50h-79.2l-9.4-50h99zm93.8,448.2h-288.7v-412.8h80.7l6.8,35.4h113.6l7.3-35.4h80.3v102.2c-27.3,14-48.8,37.9-59.7,66.7h-200.9v20.8h195c-1.4,7.4-2.2,15.1-2.2,22.9 0,13.4 2.2,26.4 6.2,38.6h-199v20.9h208.1c12,21.8 30.3,39.7 52.5,51.1v89.6zm56.3-98c-57.3,0-103.2-46.9-103.2-103.2s46.9-103.2 103.2-103.2c57.3,0 103.2,46.9 103.2,103.2s-45.8,103.2-103.2,103.2z"/>
		<polygon points="426.4,223.1 346.1,303.4 313.8,271.1 299.2,285.7 346.1,332.6 441,237.7   "/>
		<rect width="233.5" x="49" y="143.9" height="20.9"/>
		<rect width="233.5" x="49" y="388.9" height="20.9"/>
	</g>
</svg>`;
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 2.5.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.6/LICENSE *)
*/

/* nosourcemap */